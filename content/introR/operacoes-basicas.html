<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 2 Operações Básicas no R | Análise de Dados Financeiros e Econômicos com o R - Versão Online</title>
<meta name="author" content="Marcelo S. Perlin (marcelo.perlin@ufrgs.br)">
<meta name="description" content="window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-120530145-1');  Antes de começar a desenvolver o seu código, é...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Capítulo 2 Operações Básicas no R | Análise de Dados Financeiros e Econômicos com o R - Versão Online">
<meta property="og:type" content="book">
<meta property="og:image" content="/00-text-resources/cover/CAPAdigital-AnaliseDadosR.jpg">
<meta property="og:description" content="window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-120530145-1');  Antes de começar a desenvolver o seu código, é...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 2 Operações Básicas no R | Análise de Dados Financeiros e Econômicos com o R - Versão Online">
<meta name="twitter:description" content="window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'UA-120530145-1');  Antes de começar a desenvolver o seu código, é...">
<meta name="twitter:image" content="/00-text-resources/cover/CAPAdigital-AnaliseDadosR.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script>

        /* update total correct if #total_correct exists */
        update_total_correct = function() {
          if (t = document.getElementById("total_correct")) {
            t.innerHTML =
              document.getElementsByClassName("correct").length + " of " +
              document.getElementsByClassName("solveme").length + " correct";
          }
        }
        
        /* solution button toggling function */
        b_func = function() {
          var cl = this.parentElement.classList;
          if (cl.contains('open')) {
            cl.remove("open");
          } else {
            cl.add("open");
          }
        }
        
        /* function for checking solveme answers */
        solveme_func = function(e) {
          var real_answers = JSON.parse(this.dataset.answer);
          var my_answer = this.value;
          var cl = this.classList;
          if (cl.contains("ignorecase")) {
            my_answer = my_answer.toLowerCase();
          }
          if (cl.contains("nospaces")) {
            my_answer = my_answer.replace(/ /g, "");
          }
          
          if (my_answer !== "" & real_answers.includes(my_answer)) {
            cl.add("correct");
          } else {
            cl.remove("correct");
          }
        
          // match numeric answers within a specified tolerance
          if(this.dataset.tol > 0){
            var tol = JSON.parse(this.dataset.tol);  
            var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
            if (matches.reduce((a, b) => a + b, 0) > 0) {
              cl.add("correct");
            } else {
              cl.remove("correct");
            }  
          }
        
          // added regex bit
          if (cl.contains("regex")){
            answer_regex = RegExp(real_answers.join("|"))
            if (answer_regex.test(my_answer)) {
              cl.add("correct");
            }  
          }
          
          update_total_correct();
        }
        
        window.onload = function() {
          /* set up solution buttons */
          var buttons = document.getElementsByTagName("button");
        
          for (var i = 0; i < buttons.length; i++) {
            if (buttons[i].parentElement.classList.contains('solution')) {
              buttons[i].onclick = b_func;
            }
          }
          
          /* set up solveme inputs */
          var solveme = document.getElementsByClassName("solveme");
        
          for (var i = 0; i < solveme.length; i++) {
            /* make sure input boxes don't auto-anything */
            solveme[i].setAttribute("autocomplete","off");
            solveme[i].setAttribute("autocorrect", "off");
            solveme[i].setAttribute("autocapitalize", "off"); 
            solveme[i].setAttribute("spellcheck", "false");
            solveme[i].value = "";
            
            /* adjust answer for ignorecase or nospaces */
            var cl = solveme[i].classList;
            var real_answer = solveme[i].dataset.answer;
            if (cl.contains("ignorecase")) {
              real_answer = real_answer.toLowerCase();
            }
            if (cl.contains("nospaces")) {
              real_answer = real_answer.replace(/ /g, "");
            }
            solveme[i].dataset.answer = real_answer;
            
            /* attach checking function */
            solveme[i].onkeyup = solveme_func;
            solveme[i].onchange = solveme_func;
          }
          
          update_total_correct();
        }
        
        </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="00-code-resources/css/style_html.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Análise de Dados Financeiros e Econômicos com o R - Versão Online</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Bem vindo!</a></li>
<li><a class="" href="sobre-nova-edi%C3%A7%C3%A3o.html">Sobre Nova Edição</a></li>
<li><a class="" href="pref%C3%A1cio.html">Prefácio</a></li>
<li><a class="" href="introducao.html"><span class="header-section-number">1</span> Introdução</a></li>
<li><a class="active" href="operacoes-basicas.html"><span class="header-section-number">2</span> Operações Básicas no R</a></li>
<li><a class="" href="scripts-pesquisa.html"><span class="header-section-number">3</span> Desenvolvendo Rotinas de Pesquisa</a></li>
<li><a class="" href="importacao-exportacao.html"><span class="header-section-number">4</span> Importação e Exportação de Dados Locais</a></li>
<li><a class="" href="importacao-pacotes.html"><span class="header-section-number">5</span> Importação de Dados via Pacotes</a></li>
<li><a class="" href="classe-estrutura.html"><span class="header-section-number">6</span> Dataframes e outros Objetos</a></li>
<li><a class="" href="classes-basicas.html"><span class="header-section-number">7</span> As Classes Básicas de Objetos</a></li>
<li><a class="" href="programacao.html"><span class="header-section-number">8</span> Programando com o R</a></li>
<li><a class="" href="limpando-estruturando.html"><span class="header-section-number">9</span> Estruturando e Limpando Dados</a></li>
<li><a class="" href="figuras.html"><span class="header-section-number">10</span> Visualizando Dados</a></li>
<li><a class="" href="modelos.html"><span class="header-section-number">11</span> Econometria Financeira com o R</a></li>
<li><a class="" href="reportando-resultados.html"><span class="header-section-number">12</span> Reportando Resultados e Criando Relatórios</a></li>
<li><a class="" href="otimizacao.html"><span class="header-section-number">13</span> Otimização de Código</a></li>
<li><a class="" href="refer%C3%AAncias.html">Referências</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120530145-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120530145-1');
</script><div id="operacoes-basicas" class="section level1" number="2">
<h1>
<span class="header-section-number">Capítulo 2</span> Operações Básicas no R<a class="anchor" aria-label="anchor" href="#operacoes-basicas"><i class="fas fa-link"></i></a>
</h1>
<p>Antes de começar a desenvolver o seu código, é necessário entender a forma de trabalhar com o R e o RStudio. Isso inclui os componentes da linguagem, os diferentes tipos de objetos e as operações que podem ser realizadas com base nos comandos existentes.</p>
<p>Neste capítulo iremos percorrer os passos iniciais sobre o ponto de vista de alguém que nunca trabalhou com o R e, possivelmente, nunca teve contato com outra linguagem de programação. Aqueles já familiarizados com o programa irão encontrar pouca informação nova e, portanto, sugiro a leitura da próxima seção. É recomendado, porém, que no mínimo esse usuário verifique os temas tratados para confirmar ou não o seu conhecimento sobre as funcionalidades do programa. Muitas das sugestões apresentadas aqui tem potencial de aumentar significativamente a sua produtividade no RStudio.</p>
<div id="como-o-r-funciona" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Como o R Funciona?<a class="anchor" aria-label="anchor" href="#como-o-r-funciona"><i class="fas fa-link"></i></a>
</h2>
<p>A maior dificuldade que um usuário iniciante possui ao começar a desenvolver rotinas com o R é a forma de trabalho. A nossa interação com computadores foi simplificada ao longo dos anos e atualmente estamos confortáveis com o formato de interação do tipo <em>aponte e clique</em>. Isto é, caso se queira efetuar alguma operação no computador, basta apontar o <em>mouse</em> para o local específico na tela e clicar um botão que realize tal operação. Uma série de passos nesse sentido permite a execução de tarefas complexas no computador. Mas não se engane, essa forma de interação no formato <em>aponte e clique</em> é apenas uma camada por cima do que realmente acontece no computador. Por trás de todo <em>clique</em> existe um comando sendo executado, seja na abertura de um arquivo <em>pdf</em>, direcionamento do <em>browser</em> para uma página na internet ou qualquer outra operação cotidiana de trabalho.</p>
<p>Enquanto esse formato de interação visual e motora tem seus benefícios ao facilitar e popularizar o uso de computadores, é pouco flexível e eficaz quando se trabalha com procedimentos computacionais. Ao conhecer os possíveis comandos disponíveis ao usuário, é possível criar um arquivo contendo alguns comandos em sequência e, futuramente, simplesmente pedir que o computador <strong>execute</strong> esse arquivo com os nossos procedimentos. <strong>Uma rotina de computador é nada mais do que um texto que instrui, de forma clara e sequencial, o que o computador deve fazer</strong>. Investe-se certo tempo para a criação do programa, porém, no futuro, esse irá executar sempre da mesma maneira o procedimento gravado. No médio e longo prazo, existe um ganho significativo de tempo entre o uso de uma rotina do computador e uma interface do tipo <em>aponte e clique</em>.</p>
<p>Além disso, o <strong>risco de erro humano na execução do procedimento é quase nulo</strong>, pois os comandos e a sua sequência estão registrados no arquivo texto e irão ser executados sempre da mesma maneira. Da mesma forma, esse aglomerado de comandos pode ser compartilhado com outras pessoas, as quais podem replicar os resultados em seus computadores. Essa é uma das grandes razões que justificam a popularização de programação na realização de pesquisa em dados. Todos os procedimentos executados podem ser replicados pelo uso de um <em>script</em>.</p>
<p>No uso do R, o ideal é mesclar o uso do mouse com a utilização de comandos. O R e o RStudio possuem algumas funcionalidades através do <em>mouse</em>, porém a sua capacidade é otimizada quando os utilizamos via inserção de comandos específicos. Quando um grupo de comandos é realizado de uma maneira inteligente, temos um <em>script</em> do R que deve preferencialmente produzir algo importante para nós no final de sua execução. Em Finanças e Economia, isso pode ser o valor atualizado de um portfólio de investimento, o cálculo de um índice de atividade econômica, a performance histórica de uma estratégia de investimento, o resultado de uma pesquisa acadêmica, entre diversas outras possibilidades.</p>
<p>O R também possibilita a exportação de arquivos, tal como figuras a serem inseridas em um relatório técnico ou informações em um arquivo texto. De fato, o próprio relatório técnico pode ser dinamicamente criado dentro do R através da tecnologia <em>RMarkdown</em>. Por exemplo, este livro que estás lendo foi escrito utilizando o pacote <code>bookdown</code> <span class="citation">(<a href="refer%C3%AAncias.html#ref-R-bookdown" role="doc-biblioref">Xie 2022</a>)</span>, o qual é baseado em <em>RMarkdown</em>. O conteúdo do livro é compilado com a execução dos códigos e as suas saídas são registradas em texto. Todas as figuras e os dados do livro podem ser atualizados com a execução de um simples comando.</p>
<p>O produto final de trabalhar com R e RStudio será um script que produz elementos para um relatório de dados. Um bom exemplo de um código simples e polido pode ser encontrado neste <a href="https://github.com/msperlin/adfeR/raw/master/inst/extdata/others/S_Example_Script.R">link</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/msperlin/adfeR/raw/master/inst/extdata/others/S_Example_Script.R" class="uri"&gt;https://github.com/msperlin/adfeR/raw/master/inst/extdata/others/S_Example_Script.R&lt;/a&gt;&lt;/p&gt;'><sup>12</sup></a>. Abra-o e você verá o conteúdo de um arquivo com extensão <em>.R</em> que fará o download dos preços das ações de duas empresas e criará um gráfico e uma tabela. Ao terminar de ler o livro, você irá entender o que está acontecendo no código e como ele realiza o trabalho. Melhor ainda, você poderá melhorá-lo com novas funcionalidades e novas saídas. Caso esteja curioso em ver o script rodar, faça o seguinte: 1) instale R e RStudio no computador, 2) copie o conteúdo de texto do link para um novo script (“File” -&gt; “New File” -&gt; “R Script”), 3) salve-o com um nome qualquer e, finalizando, 4) pressione <code>control + shift + enter</code> para executar o <em>script</em> inteiro.</p>
</div>
<div id="objetos-e-funções" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Objetos e Funções<a class="anchor" aria-label="anchor" href="#objetos-e-fun%C3%A7%C3%B5es"><i class="fas fa-link"></i></a>
</h2>
<p>No R, <strong>tudo é um objeto, e cada tipo de objeto tem suas propriedades</strong>. Por exemplo, o valor de um índice de inflação ao longo do tempo – em vários meses e anos – pode ser representado como um objeto do tipo vetor numérico. As datas em si, no formato YYYY-MM-DD (ano-mês-dia), podem ser representadas como texto (<em>character</em>) ou a própria classe <code>Date</code>. Por fim, podemos representar conjuntamente os dados de inflação e as datas armazenando-os em um objeto único do tipo <em>dataframe</em>, o qual nada mais é do que uma <strong>tabela</strong> com linhas e colunas. Todos esses objetos fazem parte do ecossistema do R e é através da manipulação destes que tiramos o máximo proveito do <em>software</em>.</p>
<p>Enquanto representamos informações do mundo real como diferentes classes no R, um tipo especial de objeto é a função, a qual representa um procedimento preestabelecido que está disponível para o usuário. O R possui uma grande quantidade de funções, as quais possibilitam que o usuário realize uma vasta gama de procedimentos. Por exemplo, os comandos básicos do R, não incluindo demais pacotes, somam um total de 1258 funções. Com base neles e outros iremos importar dados, calcular médias, testar hipóteses, limpar dados, e muito mais.</p>
<p>Cada função possui um próprio nome. Por exemplo, a função <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> é um procedimento que ordena valores valores utilizados como <em>input</em>. Caso quiséssemos ordnear os valores <em>2, 1, 3, 0</em>, basta inserir no <em>prompt</em> o seguinte comando e apertar <em>enter</em>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">0</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 3 2 1 0</code></pre>
<p>O comando <code>c(2, 1, 3, 0)</code> combina os valores em um vetor (maiores detalhes sobre comando <code>c</code> serão dados em seção futura). Observe que a função <code>sort</code> é utilizada com parênteses de início e fim. Esses parênteses servem para destacar as entradas (<em>inputs</em>), isto é, as informações enviadas para a função produzir alguma coisa. Observe que cada entrada (ou opção) da função é separada por uma vírgula, tal como em <code>MinhaFuncao(entrada01, entrada02, entrada03, ...)</code>. No caso do código anterior, note que usamos a opção <code>decreasing = TRUE</code>. Essa é uma instrução específica para a função <code>sort</code> ordenar de forma decrescente os elementos do vetor de entrada. Veja a diferença:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">0</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 0 1 2 3</code></pre>
<p><strong>O uso de funções está no coração do R</strong> e iremos dedicar grande parte do livro a elas. Por enquanto, essa breve introdução já serve o seu propósito. O principal é entender que uma função usa suas entradas para produzir algo de volta. Nos próximos capítulos iremos utilizar funções já existentes para as mais diferentes finalidades: baixar dados da internet, ler arquivos, realizar testes estatísticos e muito mais. No capítulo <a href="programacao.html#programacao">8</a> iremos tratar deste assunto com maior profundidade, incluindo a forma de escrevermos nossas próprias funções.</p>
</div>
<div id="o-formato-brasileiro" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> O Formato Brasileiro<a class="anchor" aria-label="anchor" href="#o-formato-brasileiro"><i class="fas fa-link"></i></a>
</h2>
<p>Antes de começar a explicar o uso do R e RStudio, é importante ressaltar algumas regras de formatação de números e códigos para o caso brasileiro.</p>
<p><strong>Decimal:</strong> O decimal no R é definido pelo ponto (.), tal como em <code>2.5</code> e não vírgula, como em <code>2,5</code>. Esse é o padrão internacional, e a diferença para a notação brasileira gera muita confusão. Alguns softwares, por exemplo o Microsoft Excel, fazem essa conversão automaticamente no momento da importação dos dados. Porém isso não ocorre na maioria dos casos. Como regra geral, utilize vírgulas apenas para separar os termos de entradas em uma função (veja exemplo de seção anterior com função <code>sort</code>). Em nenhuma situação deve-se utilizar a vírgula como separador de casas decimais. Mesmo quando estiver exportando dados, sempre dê prioridade para o formato internacional, pois esse será compatível com a grande maioria dos dados e facilitará o uso do <em>software</em>.</p>
<p><strong>Caracteres latinos:</strong> Devido ao seu padrão internacional, o R apresenta problemas para entender caracteres latinos, tal como cedilha e acentos. Caso possa evitar, não utilize esses tipos de caracteres no código para nomeação de variáveis ou arquivos. Nos objetos de classe texto (<code>character</code>), é possível utilizá-los desde que a codificação do objeto esteja correta (<em>UTF-8</em> ou <em>Latin1</em>). Assim, recomenda-se que o código do R seja escrito na língua inglesa. Isso automaticamente elimina o uso de caracteres latinos e facilita a usabilidade do código por outras pessoas que não entendam a língua portuguesa. Destaca-se que essa foi a escolha utilizada para o livro. Os nomes dos objetos nos exemplos estão em inglês, assim como também todos os comentários do código. </p>
<p><strong>Formato das datas:</strong> Datas no R são formatadas de acordo com a norma <a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601</a>, seguindo o padrão <code>YYYY-MM-DD</code>, onde <code>YYYY</code> é o ano em quatro números, <code>MM</code> é o mês e <code>DD</code> é o dia. Por exemplo, uma data em ISO 8601 é 2022-11-23. No Brasil, as datas são formatadas como <code>DD/MM/YYYY</code>. Reforçando a regra, sempre dê preferência ao padrão internacional. Vale salientar que a conversão entre um formato e outro é bastante fácil e será apresentada em capítulo futuro.</p>
<p>No momento de instalação do R, diversas informações sobre o formato local do seu computador são importadas do seu sistema operacional. Para saber qual o formato que o R está configurado localmente, digite o seguinte comando no <em>prompt</em> (canto esquerdo inferior do RStudio) e aperte <em>enter</em>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get local format</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;     decimal_point     thousands_sep          grouping 
R&gt;               "."                ""                "" 
R&gt;   int_curr_symbol   currency_symbol mon_decimal_point 
R&gt;            "BRL "              "R$"               "," 
R&gt; mon_thousands_sep      mon_grouping     positive_sign 
R&gt;               "."        "\003\003"                "" 
R&gt;     negative_sign   int_frac_digits       frac_digits 
R&gt;               "-"               "2"               "2" 
R&gt;     p_cs_precedes    p_sep_by_space     n_cs_precedes 
R&gt;               "1"               "1"               "1" 
R&gt;    n_sep_by_space       p_sign_posn       n_sign_posn 
R&gt;               "1"               "1"               "1"</code></pre>
<p>A saída de <code><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv()</a></code> mostra como o R interpreta pontos decimais e o separador de milhares, entre outras coisas. Como você pode ver no resultado anterior, este livro foi compilado usando a notação brasileira de moeda (BRL/R$), mas usa a formatação internacional – o ponto (<code>.</code>) – para decimais.</p>
<div class="rmdcaution">
<p>
Muito cuidado ao modificar o formato que o R interpreta os diferentes
símbolos e notações. Como regra de bolso, caso precisar usar algum
formato específico, faça-o isoladamente dentro do contexto do código.
Evite mudanças permanentes pois nunca se sabe onde tais formatos estão
sendo usados. Evite, assim, surpresas desagradáveis no futuro.
</p>
</div>
</div>
<div id="tipos-de-arquivos" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Tipos de Arquivos<a class="anchor" aria-label="anchor" href="#tipos-de-arquivos"><i class="fas fa-link"></i></a>
</h2>
<p>Assim como outros programas, o R possui um ecossistema de arquivos e cada extensão tem uma finalidade diferente. A seguir apresenta-se uma descrição de diversas extensões de arquivos. Os itens da lista estão ordenados por ordem de importância e uso. Note que omitimos arquivos de figuras tal como <em>.png</em>, <em>.jpg</em>, <em>.gif</em> entre outros, pois estes não são exclusivos do R.</p>
<p><strong>Arquivos com extensão <em>.R</em></strong>: Representam arquivos do tipo texto contendo diversas instruções para o R. Esses são os arquivos que conterão o código da pesquisa e onde passaremos a maior parte do tempo. Também pode ser chamado de um <em>script</em> ou rotina de pesquisa. Como sugestão, pode-se dividir toda uma pesquisa em etapas e, para cada, nomear <em>script</em> correspondente. Exemplos: <em>01-Get-Data.R</em>, <em>02-Clean-data.R</em>, <em>03_Estimate_Models.R</em>.</p>
<p><strong>Arquivos com extensão <em>.RData</em> e <em>.rds</em></strong>: armazenam dados nativos do R. Esses arquivos servem para salvar objetos do R em um arquivo no disco rígido do computador para, em sessão futura, serem novamente carregados. Por exemplo, podes guardar o resultado de uma pesquisa em uma tabela, a qual é salva em um arquivo com extensão <em>.RData</em> ou <em>.rds</em>. Exemplos: <em>Raw-Data.RData</em>, <em>Table-Results.rds</em>.</p>
<p><strong>Arquivos com extensão <em>.Rmd</em>, <em>.md</em> e <em>.Rnw</em></strong>: São arquivos relacionados a tecnologia <em>Rmarkdown</em>. O uso desses arquivos permite a criação de documentos onde texto e código são integrados.</p>
<p><strong>Arquivos com extensão <em>.Rproj</em></strong>: Contém informações para a edição de projetos no RStudio. O sistema de projetos do RStudio permite a configuração customizada do projeto e também facilita a utilização de ferramentas de controle de código, tal como controle de versões. O seu uso, porém, não é essencial. Para aqueles com interesse em conhecer esta funcionalidade, sugiro a leitura do <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">manual do RStudio</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="uri"&gt;https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects&lt;/a&gt;&lt;/p&gt;'><sup>13</sup></a>. Uma maneira simples de entender os tipos de projetos disponíveis é, no RStudio, clicar em “File”, “New project”, “New Folder” e assim deve aparecer uma tela com todos os tipos possíveis de projetos no RStudio. Exemplo: <em>My-Dissertation-Project.Rproj</em>.</p>
</div>
<div id="explicando-a-tela-do-rstudio" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Explicando a Tela do RStudio<a class="anchor" aria-label="anchor" href="#explicando-a-tela-do-rstudio"><i class="fas fa-link"></i></a>
</h2>
<p>Após instalar os dois programas, R e RStudio, Procure o ícone do RStudio na área de trabalho ou via menu <em>Iniciar</em>. Note que a instalação do R inclui um programa de interface e isso muitas vezes gera confusão. Verifique que estás utilizado o <em>software</em> correto. A janela resultante deve ser igual a figura <a href="operacoes-basicas.html#fig:RStudio1">2.1</a>, apresentada a seguir.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:RStudio1"></span>
<img src="00-text-resources/figs/RStudio1.png" alt="A tela do RStudio" width="100%"><p class="caption">
Figura 2.1: A tela do RStudio
</p>
</div>
<p>Observe que o RStudio automaticamente detectou a instalação do R e inicializou a sua tela no lado esquerdo. Caso não visualizar uma tela parecida ou chegar em uma mensagem de erro indicando que o R não foi encontrado, repita os passos de instalação do capítulo anterior (seção <a href="introducao.html#instalacao">1.4</a>).</p>
<p>Como um primeiro exercício, clique em <em>File</em>, <em>New File</em> e <em>R Script</em>. Após, um editor de texto deve aparecer no lado esquerdo da tela do RStudio. É nesse editor que iremos inserir os nossos comandos, os quais são executados de cima para baixo, na mesma direção em que normalmente o lemos. Note que essa direção de execução introduz uma dinâmica de recursividade: cada comando depende do comando executado nas linhas anteriores. Após realizar os passos definidos anteriormente, a tela resultante deve ser semelhante à apresentada na figura <a href="operacoes-basicas.html#fig:RStudio2">2.2</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:RStudio2"></span>
<img src="00-text-resources/figs/RStudio2.png" alt="Explicando a tela do RStudio" width="100%"><p class="caption">
Figura 2.2: Explicando a tela do RStudio
</p>
</div>
<div class="rmdimportant">
<p>
Uma sugestão importante aqui é modificar o esquema de cores do
RStudio para uma configuração de <strong>tela escura</strong>. Não é
somente uma questão estética mas sim de prevenção e melhoria de sua
saúde física. Possivelmente irás passar demasiado tempo na frente do
computador. Assim, vale a pena modificar as cores da interface para
aliviar seus olhos do constante brilho da tela. Dessa forma, conseguirás
trabalhar por mais tempo, sem forçar a sua visão. Podes configurar o
esquema de cores do RStudio indo na opção <em>Tools</em>, <em>Global
Options</em> e então em <em>Appearance</em>. Um esquema de cores escuras
que pessoalmente gosto e sugiro é o <em>Ambience</em>.
</p>
</div>
<p>Após os passos anteriores, a tela do RStudio deve estar semelhante a Figura <a href="operacoes-basicas.html#fig:RStudio2">2.2</a>, com os seguintes itens/painéis:</p>
<p><strong>Editor de scripts (<em>Script editor</em>):</strong> localizado no lado esquerdo e acima da tela. Esse painel é utilizado para escrever código e é onde passaremos a maior parte do tempo.</p>
<p><strong>Console do R (<em>R prompt</em>):</strong> localizado no lado esquerdo e abaixo do editor de <em>scripts</em>. Apresenta o <em>prompt</em> do R, o qual também pode ser utilizado para executar comandos. A principal função do <em>prompt</em> é testar código e apresentar os resultados dos comandos inseridos no editor de <em>scripts</em>.</p>
<p><strong>Área de trabalho (<em>Environment</em>):</strong> localizado no lado direito e superior da tela. Mostra todos os objetos, incluindo variáveis e funções atualmente disponíveis para o usuário. Observe também a presença do painel <em>History</em>, o qual mostra o histórico dos comandos já executados.</p>
<p><strong>Pacotes (<em>Panel Packages</em>):</strong> mostra os pacotes instalados e carregados pelo R. Um pacote é nada mais que um módulo no R, cada qual com sua finalidade específica. Observe a presença de quatro abas: <em>Files</em>, para carregar e visualizar arquivos do sistema; <em>Plots</em>, para visualizar figuras; <em>Help</em>, para acessar o sistema de ajuda do R e <em>Viewer</em>, para mostrar resultados dinâmicos e interativos, tal como uma página da internet.</p>
<p>Como um exercício introdutório, vamos inicializar duas variáveis. Dentro do console do R (lado esquerdo inferior), digite os seguintes comandos e aperte <em>enter</em> ao final de cada linha. O símbolo <code>&lt;-</code> é nada mais que a junção de <code>&lt;</code> com <code>-</code>. O símbolo <code>'</code> representa uma aspa simples e sua localização no teclado Brasileiro é no botão abaixo do <em>escape</em> (<em>esc</em>), lado esquerdo superior do teclado.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x and y</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'my text'</span></span></code></pre></div>
<p>Após a execução, dois objetos devem aparecer no painel <em>Environment</em>, um chamado <code>x</code> com o valor 1, e outro chamado <code>y</code> com o conjunto de caracteres <code>'my text'</code>. O histórico de comandos na aba <em>History</em> também foi atualizado com os comandos utilizados anteriormente.</p>
<p>Agora, vamos mostrar na tela os valores de <code>x</code>. Para isso, digite o seguinte comando no <em>prompt</em> e aperte <em>enter</em> novamente:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 1</code></pre>
<p>A função <code>print</code> é uma das principais funções para mostrarmos valores no <em>prompt</em> do R. O texto apresentado como <code>[1]</code> indica o índice do primeiro número da linha. Para verificar isso, digite o seguinte comando, o qual irá mostrar vários números na tela: </p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print vector from 50 to 100</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fl">50</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  [1]  50  51  52  53  54  55  56  57  58  59  60  61  62  63
R&gt; [15]  64  65  66  67  68  69  70  71  72  73  74  75  76  77
R&gt; [29]  78  79  80  81  82  83  84  85  86  87  88  89  90  91
R&gt; [43]  92  93  94  95  96  97  98  99 100</code></pre>
<p>Nesse caso, utilizamos o símbolo <code>:</code> em <code>50:100</code> para criar uma sequência iniciando em 50 e terminando em 100. Observe que temos valores encapsulados por colchetes ([]) no lado esquerda da tela. Esses representam os índices do primeiro elemento apresentado na linha. Por exemplo, o décimo quinto elemento do vetor criado é o valor 64.</p>
</div>
<div id="pacotes-do-r" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Pacotes do R<a class="anchor" aria-label="anchor" href="#pacotes-do-r"><i class="fas fa-link"></i></a>
</h2>
<p>Um dos grandes benefícios do uso do R é o seu acervo de pacotes. Esses representam um conjunto de procedimentos agrupados em uma coleção de funções e voltados para a resolução de um problema qualquer. O R tem em sua essência uma filosofia de colaboração. Usuários disponibilizam os seus códigos para outras pessoas utilizarem. E, mais importante, <strong>todos os pacotes são gratuitos</strong>, assim como o R. Por exemplo, considere um caso em que está interessado em baixar dados da internet sobre o desemprego histórico no Brasil. Para isso, basta procurar e instalar o pacote específico que realiza esse procedimento.</p>
<p>Esses pacotes podem ser instalados de diferentes fontes, com as principais sendo <strong>CRAN</strong> (<em>The Comprehensive R Archive Network</em>) e <strong>Github</strong>. A cada dia aumenta a quantidade e diversidade de pacotes existentes para o R. O próprio autor deste livro possui diversos pacotes disponíveis no CRAN, cada um para resolver algum problema diferente. Na grande maioria, são pacotes para importar e organizar dados financeiros.</p>
<p>O CRAN é o repositório oficial do R e é livre. Qualquer pessoa pode enviar um pacote e todo código enviado está disponível na internet. Existe, porém, um processo de avaliação que o código passa e certas normas rígidas devem ser respeitadas sobre o formato do código, o manual do usuário e a forma de atualização do pacote. Para quem tiver interesse, um tutorial claro e fácil de seguir é apresentado no site <a href="http://r-pkgs.had.co.nz/intro.html">http://r-pkgs.had.co.nz/intro.html</a>. As regras completas estão disponíveis no site do CRAN - <a href="https://cran.r-project.org/web/packages/policies.html">https://cran.r-project.org/web/packages/policies.html</a>. A adequação do código a essas normas é responsabilidade do desenvolvedor e gera um trabalho significativo, principalmente na primeira submissão.</p>
<p>A lista completa de pacotes disponíveis no CRAN, juntamente com uma breve descrição, pode ser acessada no link <em>packages</em> do site do R - <a href="https://cran.r-project.org/">https://cran.r-project.org/</a>. Uma maneira prática de verificar a existência de um pacote para um procedimento específico é carregar a página anterior e procurar no seu navegador de internet a palavra-chave que define o seu procedimento. Caso existir o pacote com a palavra-chave, a procura acusará o encontro do termo na descrição do pacote.</p>
<p>Outra fonte importante para o encontro de pacotes é o <a href="https://cran.r-project.org/web/views/"><em>Task Views</em></a>, em que são destacados os principais pacotes de acordo com a área e o tipo de uso. Veja a tela do <em>Task Views</em> na Figura <span class="math inline">\(\ref{fig:TaskViews}\)</span>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:TaskViews"></span>
<img src="00-text-resources/figs/TaskViews.png" alt="Tela do Task Views" width="100%"><p class="caption">
Figura 2.3: Tela do Task Views
</p>
</div>
<p>Ao contrário do CRAN, o <em>Github</em> não possui restrição quanto ao código enviado e, devido a isso, tende a ser escolhido como ambiente de compartilhamento de código. A responsabilidade de uso, porém, é do próprio usuário. Na prática, é muito comum os desenvolvedores manterem uma versão em desenvolvimento no <em>Github</em> e outra oficial no CRAN. Quando a versão em desenvolvimento atinge um estágio de maturidade, a mesma é enviada ao CRAN.</p>
<p>O mais interessante no uso de pacotes é que estes podem ser acessados e instalados diretamente no R via a internet. Para saber qual é a quantidade atual de pacotes no CRAN, digite e execute os seguintes comandos no <em>prompt</em>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find current available packages</span></span>
<span><span class="va">df_cran_pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/available.packages.html">available.packages</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get size of matrix</span></span>
<span><span class="va">n_cran_pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df_cran_pkgs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">n_cran_pkgs</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 18877</code></pre>
<p>Atualmente, 2022-11-23 10:51:29, existem 18877 pacotes disponíveis nos servidores do CRAN.</p>
<p>Também se pode verificar a quantidade de pacotes localmente instalados com o comando <code><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get number of local (installed) packages</span></span>
<span><span class="va">n_local_pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">n_local_pkgs</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 531</code></pre>
<p>Nesse caso, o computador em que o livro foi escrito possui 531 pacotes do R instalados. Note que, apesar do autor ser um experiente programador do R, apenas uma pequena fração do pacotes disponíveis no CRAN está sendo usada! A diversidade dos pacotes é gigantesca.</p>
<div id="instalando-pacotes-do-cran" class="section level3" number="2.6.1">
<h3>
<span class="header-section-number">2.6.1</span> Instalando Pacotes do CRAN<a class="anchor" aria-label="anchor" href="#instalando-pacotes-do-cran"><i class="fas fa-link"></i></a>
</h3>
<p>Para instalar um pacote, basta utilizar o comando <code>install.packages</code>. Como exemplo, vamos instalar um pacote que será utilizado nos capítulos futuros, o <code>readr</code>: </p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install pkg readr</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'readr'</span><span class="op">)</span></span></code></pre></div>
<p>Copie e cole este comando no <em>prompt</em> e pronto! O R irá baixar os arquivos necessários e instalar o pacote <code>readr</code> e suas dependências. Após isto, as funções relativas ao pacote estarão prontas para serem usadas após o carregamento do módulo (detalhes a seguir). Observe que definimos o nome do pacote na instalação como se fosse texto, com o uso das aspas (<code>"</code>). Caso o pacote instalado seja dependente de outros pacotes, o R automaticamente instala todos módulos faltantes. Assim, todos os requerimentos para o uso do respectivo pacote já serão satisfeitos e tudo funcionará perfeitamente. É possível, porém, que um pacote tenha uma dependência externa. Como um exemplo, o pacote <code>RndTexExams</code> depende da existência de uma instalação do LaTex. Geralmente essa é anunciada na sua descrição e um erro é sinalizado na execução do programa quando o LaTex não é encontrado. Fique atento, portanto, a esses casos.</p>
<p>Aproveitando o tópico, sugiro que o leitor já instale todos os pacotes do <code>tidyverse</code> com o seguinte código:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install pkgs from tidyverse</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tidyverse'</span><span class="op">)</span></span></code></pre></div>
<p>O <code>tidyverse</code> é um conjunto de pacotes voltados a <em>data science</em> e com uma sintaxe própria e consistente, voltada a praticabilidade. Verás que, em uma instalação nova do R, o <code>tidyverse</code> depende de uma grande quantidade de pacotes.</p>
</div>
<div id="instalando-pacotes-do-github" class="section level3" number="2.6.2">
<h3>
<span class="header-section-number">2.6.2</span> Instalando Pacotes do Github<a class="anchor" aria-label="anchor" href="#instalando-pacotes-do-github"><i class="fas fa-link"></i></a>
</h3>
<p>Para instalar um pacote diretamente do Github, é necessário instalar antes o pacote <em>devtools</em>, disponível no CRAN: </p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install devtools</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'devtools'</span><span class="op">)</span></span></code></pre></div>
<p>Após isto, utilize função <code><a href="https://remotes.r-lib.org/reference/install_github.html">devtools::install_github</a></code> para instalar um pacote diretamente do Github. Note que o símbolo <code>::</code> indica que função <code>install_github</code> pertence ao pacote <code>devtools</code>. Com esta particular sintaxe, não precisamos carregar todo o pacote para utilizar apenas uma função.</p>
<p>No exemplo a seguir instalamos a versão em desenvolvimento do pacote <code>ggplot2</code>, cuja versão oficial também está disponível no CRAN: </p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install ggplot2 from github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"hadley/ggplot2"</span><span class="op">)</span></span></code></pre></div>
<p>Observe que o nome do usuário do repositório também é incluído. No caso anterior, o nome <em>hadley</em> pertence ao desenvolvedor do <code>ggplot2</code>, Hadley Wickham. No decorrer do livro notará que esse nome aparecerá diversas vezes, dado que Hadley é um prolífico e competente desenvolvedor de diversos pacotes do R e do <code>tidyverse</code>.</p>
<div class="rmdcaution">
<p>
Um aviso aqui é importante. <strong>Os pacotes do github não são
moderados. Qualquer pessoa pode enviar código para lá e o conteúdo não é
checado de forma independente.</strong> Nunca instale pacotes do github
sem conhecer os autores. Apesar de improvável – nunca aconteceu comigo
por exemplo – é possível que esses possuam algum código malicioso.
</p>
</div>
</div>
<div id="carregando-pacotes" class="section level3" number="2.6.3">
<h3>
<span class="header-section-number">2.6.3</span> Carregando Pacotes<a class="anchor" aria-label="anchor" href="#carregando-pacotes"><i class="fas fa-link"></i></a>
</h3>
<p>Dentro de uma rotina de pesquisa, utilizamos a função <code>library</code> para carregar um pacote na nossa sessão do R. Ao fecharmos o RStudio ou então iniciar uma nova sessão do R, os pacotes são descarregados. Vale salientar que alguns pacotes, tal como o <code>base</code> e o <code>stats</code>, são inicializados automaticamente a cada nova sessão. A grande maioria, porém, deve ser carregada no início dos <em>scripts</em>. Veja o exemplo a seguir:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load dplyr</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>A partir disso, todas as funções do pacote estarão disponíveis para o usuário. Note que não é necessário utilizar aspas (<code>"</code>) ao carregar o pacote. Caso utilize uma função específica do pacote e não deseje carregar todo ele, pode fazê-lo através do uso do símbolo especial <code>::</code>, conforme o exemplo a seguir.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># call fct fortune() from pkg fortune</span></span>
<span><span class="fu">fortunes</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/fortunes/man/fortunes.html">fortune</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 
R&gt; Overall, SAS is about 11 years behind R and S-Plus in
R&gt; statistical capabilities (last year it was about 10 years
R&gt; behind) in my estimation.
R&gt;    -- Frank Harrell (SAS User, 1969-1991)
R&gt;       R-help (September 2003)</code></pre>
<p>Nesse caso, utilizamos a função <code>fortune</code> do próprio pacote <code>fortunes</code>, o qual mostra na tela uma frase possivelmente engraçada escolhida do <em>mailing list</em> do R. Nesse caso, selecionamos a mensagem número 10. Se não tiver disponível o pacote, o R mostrará a seguinte mensagem de erro:</p>
<pre><code>R&gt; Error in library("fortune") : there is no package called "fortune"</code></pre>
<p>Para resolver, utilize o comando <code>install.packages("fortunes")</code> para instalar o pacote no seu computador. Execute o código <code>fortunes::fortune(10)</code> no <em>prompt</em> para confirmar a instalação. Toda vez que se deparar com essa mensagem de erro, deves instalar o pacote que está faltando.</p>
<p>Outra maneira de carregar um pacote é através da função <code>require</code>. Essa tem um comportamento diferente da função <code>library</code> e deve ser utilizada dentro da definição de funções ou no teste do carregamento do pacote. Caso o usuário crie uma função customizada que necessite de procedimentos de um pacote em particular, o mesmo deve carregar o pacote no escopo da função. Por exemplo, veja o código a seguir, em que criamos uma função dependente do pacote <code>quantmod</code>:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_fct</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="http://www.quantmod.com">quantmod</a></span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantmod/man/getSymbols.html">getSymbols</a></span><span class="op">(</span><span class="va">x</span>, auto.assign <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Nesse caso, a função <code>getSymbols</code> faz parte do pacote <code>quantmod</code>. Não se preocupe agora com a estrutura utilizada para criar uma função no R. Essa será explicada em capítulo futuro.</p>
<div class="rmdcaution">
<p>
Uma precaucão que deve sempre ser tomada quando se carrega um pacote
é um possível <strong>conflito de funções</strong>. Por exemplo, existe
uma função chamada <code>filter</code> no pacote <code>dplyr</code> e
também no pacote <code>stats</code>. Caso carregarmos ambos pacotes e
chamarmos a função <code>filter</code> no escopo do código, qual delas o
R irá usar? Pois bem, a <strong>preferência é sempre para o último
pacote carregado</strong>. Esse é um tipo de problema que pode gerar
muita confusão. Felizmente, note que o próprio R acusa um conflito de
nome de funções no carregamento do pacote. Para testar, inicie uma nova
sessão do R e carregue o pacote <code>dplyr</code>. Verás que uma
mensagem indica haver dois conflitos com o pacote <code>stats</code> e
quatro com pacote o <code>base</code>.
</p>
</div>
</div>
<div id="atualizando-pacotes" class="section level3" number="2.6.4">
<h3>
<span class="header-section-number">2.6.4</span> Atualizando Pacotes<a class="anchor" aria-label="anchor" href="#atualizando-pacotes"><i class="fas fa-link"></i></a>
</h3>
<p>Ao longo do tempo, é natural que os pacotes disponibilizados no CRAN sejam atualizados para acomodar novas funcionalidades ou se adaptar a mudanças em suas dependências. Assim, é recomendável que os usuários atualizem os seus pacotes instalados para uma nova versão através da internet. Esse procedimento é bastante fácil. Uma maneira direta de atualizar pacotes é clicar no botão <em>update</em> no painel de pacotes no canto direito inferior do RStudio, conforme mostrado na figura <a href="operacoes-basicas.html#fig:RStudio-update">2.4</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:RStudio-update"></span>
<img src="00-text-resources/figs/RStudio_update.png" alt="Atualizando pacotes no R" width="100%"><p class="caption">
Figura 2.4: Atualizando pacotes no R
</p>
</div>
<p>A atualização de pacotes através do <em>prompt</em> também é possível. Para isso, basta utilizar o comando <code>update.packages</code>, conforme mostrado a seguir. </p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">update.packages</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>O comando <code><a href="https://rdrr.io/r/utils/update.packages.html">update.packages()</a></code> compara a versão dos pacotes instalados em relação a versão disponível no CRAN. Caso tiver alguma diferença, a nova versão é instalada. Após a execução do comando, todos os pacotes estarão atualizados com a versão disponível nos servidores do CRAN.</p>
<div class="rmdimportant">
<p>
Versionamento de pacotes é extremamente importante para manter a
reproducibilidade do código. Apesar de ser raro de acontecer, é possível
que a atualização de um pacote no R modifique, para os mesmos dados,
resultados já obtidos anteriormente. Tenho uma experiência
particularmente memorável quando um artigo científico retornou da
revisão e, devido a atualização de um dos pacotes, não consegui
reproduzir os resultados apresentados no artigo. No final deu tudo
certo, mas o trauma fica.
</p>
<p>
Uma solução para este problema é congelar as versões dos pacotes para
cada projeto usando a ferramenta <code>packrat</code> do RStudio. Em
resumo, o <code>packrat</code> faz cópias locais dos pacotes utilizados
no projeto, os quais têm preferência aos pacotes do sistema. Assim, se
um pacote for atualizado no sistema, mas não no projeto, o código R vai
continuar usando a versão mais antiga e seu código sempre rodará nas
mesmas condições.
</p>
</div>
</div>
</div>
<div id="executando-códigos-em-um-script" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Executando Códigos em um <em>Script</em><a class="anchor" aria-label="anchor" href="#executando-c%C3%B3digos-em-um-script"><i class="fas fa-link"></i></a>
</h2>
<p>Agora, vamos juntar todos os códigos digitados anteriormente e colar na tela do editor (lado esquerdo superior), assim como mostrado a seguir:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set objects</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'my text'</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<p>Após colar todos os comandos no editor, salve o arquivo <em>.R</em> em alguma pasta pessoal. Esse arquivo, o qual no momento não faz nada de especial, registrou os passos de um algoritmo simples que cria dois objetos e mostra os seus valores. Futuramente esse irá ter mais forma, com a importação de dados, manipulação e modelagem dos mesmos e saída de tabelas e figuras.</p>
<p>No RStudio existem alguns atalhos predefinidos para executar códigos que economizam bastante tempo. Para executar um <em>script</em> inteiro, basta apertar <code>control + shift + s</code>. Esse é o comando <em>source</em>. Com o RStudio aberto, sugiro testar essa combinação de teclas e verificar como o código digitado anteriormente é executado, mostrando os valores no <em>prompt</em> do R. Visualmente, o resultado deve ser próximo ao apresentado na figura <a href="operacoes-basicas.html#fig:example-script-source">2.5</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:example-script-source"></span>
<img src="00-text-resources/figs/RStudio_example_script_source.png" alt="Exemplo de Rotina no R" width="100%"><p class="caption">
Figura 2.5: Exemplo de Rotina no R
</p>
</div>
<p>Outro comando muito útil é a execução por linha. Nesse caso não é executado todo o arquivo, mas somente a linha em que o cursor do <em>mouse</em> se encontra. Para isto, basta apertar <code>control+enter</code>. Esse atalho é bastante útil no desenvolvimento de rotinas pois permite que cada linha seja testada antes de executar o programa inteiro. Como um exemplo de uso, aponte o cursor para a linha <code>print(x)</code> e pressione <code>control + enter</code>. Verás que o valor de <code>x</code> é mostrado na tela do <em>prompt</em>. A seguir destaco esses e outros atalhos do RStudio, os quais também são muito úteis.</p>
<ul>
<li>
<strong>control+shift+s</strong> executa o arquivo atual do RStudio, sem mostrar comandos no <em>prompt</em> (sem eco – somente saída);</li>
<li>
<strong>control+shift+enter</strong>: executa o arquivo atual, mostrando comandos na tela (com eco – código e saída);</li>
<li>
<strong>control+enter</strong>: executa a linha selecionada, mostrando comandos na tela;</li>
<li>
<strong>control+shift+b</strong>: executa os códigos do início do arquivo até a linha atual onde o cursor se encontra;</li>
<li>
<strong>control+shift+e</strong>: executa os códigos da linha onde o cursor se encontra até o final do arquivo.</li>
</ul>
<p>Sugere-se que esses atalhos sejam memorizados e utilizados. Isso facilita bastante o uso do programa. Para aqueles que gostam de utilizar o <em>mouse</em>, uma maneira alternativa para rodar o código do <em>script</em> é apertar o botão <em>source</em>, localizado no canto direito superior do editor de rotinas. Isto é equivalente ao atalho <code>control+shift+s</code>.</p>
<p>Porém, no mundo real de programação, poucos são os casos em que uma análise de dados é realizada por um <em>script</em> apenas. Como uma forma de organizar o código, pode-se dividir o trabalho em N <em>scripts</em> diferentes, onde um deles é o “mestre”, responsável por rodar os demais.</p>
<p>Neste caso, para executar os <em>scripts</em> em sequência, basta chamá-los no <em>script</em> mestre com o comando <code>source</code>, como no código a seguir: </p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import all data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">'01-import-data.R'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">'02-clean-data.R'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build tables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">'03-build-table.R'</span><span class="op">)</span></span></code></pre></div>
<p>Nesse caso, o código anterior é equivalente a abrirmos e executarmos (<em>control + shift + s</em>) cada um dos <em>scripts</em> sequencialmente.</p>
<p>Como podemos ver, existem diversas maneiras de executar uma rotina de pesquisa. Na prática, porém, iras centralizar o uso em dois comandos apenas: <code>control+shift+s</code> para rodar o <em>script</em> inteiro e <code>control+enter</code> para rodar por linha.</p>
</div>
<div id="testando-código" class="section level2" number="2.8">
<h2>
<span class="header-section-number">2.8</span> Testando Código<a class="anchor" aria-label="anchor" href="#testando-c%C3%B3digo"><i class="fas fa-link"></i></a>
</h2>
<p>O desenvolvimento de códigos em R segue um conjunto de etapas. Primeiro você escreverá uma nova linha de comando em uma rotina. Essa linha será testada com o atalho <code>control + enter</code>, verificando-se a ocorrência de erros e as saídas na tela. Caso não houver erro e o resultado for igual ao esperado, parte-se para a próxima linha de código.</p>
<p>Um ciclo de trabalho fica claro, a escrita do código da linha atual é seguida pela execução, seguido da verificação de resultados, modificação caso necessário e assim por diante. Esse é um processo normal e esperado. Dado que uma rotina é lida e executada de cima para baixo, você precisa ter certeza de que cada linha de código está corretamente especificada antes de passar para a próxima.</p>
<p>Quando você está tentando encontrar um erro em um <em>script</em> preexistente, o R oferece algumas ferramentas para controlar e avaliar sua execução. Isso é especialmente útil quando você possui um código longo e complicado. A ferramenta de teste mais simples e fácil de utilizar que o RStudio oferece é o ponto de interrupção do código. No RStudio, você pode clicar no lado esquerdo do editor e aparecerá um círculo vermelho, como na Figura <a href="operacoes-basicas.html#fig:example-debug">2.6</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:example-debug"></span>
<img src="00-text-resources/figs/RStudio_example_debug.png" alt="Exemplo de debug" width="60%"><p class="caption">
Figura 2.6: Exemplo de debug
</p>
</div>
<p>O círculo vermelho indica um ponto de interrupção do código que forçará o R a pausar a execução nessa linha. Quando a execução atinge o ponto de interrupção, o <em>prompt</em> mudará para <code>browser[1]&gt;</code> e você poderá verificar o conteúdo dos objetos. No console, você tem a opção de continuar a execução para o próximo ponto de interrupção ou interrompê-la. O mesmo resultado pode ser alcançado usando a função <code>browser</code>. Dê uma olhada:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="co"># set y</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/browser.html">browser</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'My humble text'</span></span>
<span></span>
<span><span class="co"># print contents of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>O resultado prático do código anterior é o mesmo que utilizar o círculo vermelho do RStudio, figura <a href="operacoes-basicas.html#fig:example-debug">2.6</a>. Porém, o uso do <code>browser</code> permite mais controle sobre onde a execução deve ser pausada. Como um teste, copie e cole o código anterior no RStudio, salve em um novo <em>script</em> e execute com <em>Control + Shift + S</em>. Para sair do ambiente de depuramento (<em>debug</em>), aperte <em>enter</em> no <em>prompt</em> do RStudio. </p>
</div>
<div id="criando-objetos-simples" class="section level2" number="2.9">
<h2>
<span class="header-section-number">2.9</span> Criando Objetos Simples<a class="anchor" aria-label="anchor" href="#criando-objetos-simples"><i class="fas fa-link"></i></a>
</h2>
<p>Um dos comandos mais básicos no R é a definição de objetos. Como foi mostrado nas seções anteriores, pode-se definir um objeto com o uso do comando <code>&lt;-</code>, o qual, para o português, é traduzido para o verbo <em>defina</em> (<em>assign</em> em inglês). Considere o seguinte código:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x</span></span>
<span><span class="va">my_x</span> <span class="op">&lt;-</span> <span class="fl">123</span></span>
<span></span>
<span><span class="co"># set x, y and z in one line</span></span>
<span><span class="va">my_x</span> <span class="op">&lt;-</span> <span class="fl">1</span> ; <span class="va">my_y</span> <span class="op">&lt;-</span> <span class="fl">2</span>; <span class="va">my_z</span> <span class="op">&lt;-</span> <span class="fl">3</span></span></code></pre></div>
<p>Lê-se esse código como <em>x é definido como 123</em>. A direção da seta define onde o valor será armazenado. Por exemplo, utilizar <code>123 -&gt; my_x</code> também funcionaria, apesar de ser uma sintaxe pouco utilizada ou recomendada. Note que também é possível escrever diversos comandos na mesma linha com o uso da semi-vírgula (<code>;</code>).</p>
<div class="rmdimportant">
<p>
O uso do símbolo <code>&lt;-</code> para a definição de objetos é
específico do R. Na época da concepção da linguagem <em>S</em>, de onde
o R foi baseado, existiam teclados com uma tecla específica que definia
diretamente o símbolo de seta. Teclados contemporâneos, porém, não
possuem mais esta configuração. Uma alternativa é utilizar o atalho para
o símbolo, o qual, no Windows, é definido por <code>alt + -</code>.
</p>
</div>
<p>É possível também usar o símbolo <code>=</code> para definir objetos assim como o <code>&lt;-</code>. Saliento que esta é prática comum em outras linguagens de programação. Porém, no ecosistema do R, a utilização do <code>=</code> com esse fim específico não é recomendada. O símbolo de igualdade tem o seu uso especial e resguardado na definição de argumentos de uma função tal como <code>sort(x = 1:10, decreasing = TRUE)</code>.</p>
<p>O nome dos objetos é importante no R. Tirando alguns casos específicos, o usuário pode nomear os objetos como quiser. Essa liberdade, porém, pode ser um problema. É desejável sempre dar nomes curtos que façam sentido ao conteúdo do objeto e que sejam simples de entender. Isso facilita o entendimento do código por outros usuários e faz parte das normas sugeridas para a estruturação do código. Observe que todos os objetos criados nesse livro possuem nomenclatura em inglês e formatação específica, onde espaços entre substantivos e verbos são substituídos por traço baixo, tal como em <code>my_x</code> e <code>my_csv_file</code>. Aqui, o mais importante é a consistência do formato. Sempre mantenha o mesmo padrão em todo o código. No capítulo <a href="otimizacao.html#otimizacao">13</a> vamos ir mais a fundo nesta questão de estrutura de código.</p>
<p>O R executa o código procurando objetos e funções disponíveis no seu ambiente de trabalho (<em>enviromnent</em>). Se tentarmos acessar um objeto que não existe, o R irá retornar uma mensagem de erro:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; Error in print(z): object 'z' not found</code></pre>
<p>Isso ocorre pois o objeto <code>z</code> não existe na sessão atual do R. Se criarmos uma variável <code>z</code> como <code>z &lt;- 123</code> e repetirmos o comando <code>print(z)</code>, não teremos a mesma mensagem de erro.</p>
<p>Um ponto importante aqui é a definição de objetos de classes diferentes com o uso de símbolos específicos. O uso de aspas duplas (<code>" "</code>) ou simples (<code>' '</code>) define objetos da classe texto enquanto números são definidos pelo próprio valor. Conforme será mostrado, cada objeto no R tem uma classe e cada classe tem um comportamento diferente. Portanto, objetos criados com o uso de aspas pertencem à classe <em>character</em>. Podemos confirmar isso via código:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vars</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'1'</span></span>
<span></span>
<span><span class="co"># display classes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "numeric"</code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "character"</code></pre>
<p>As saídas anteriores mostram que a variável <code>x</code> é do tipo numérico, enquanto a variável <code>y</code> é do tipo texto (<em>character</em>). Ambas fazem parte das classes básicas de objetos no R. Por enquanto, este é o mínimo que deves saber para avançar nos próximos capítulos. Iremos estudar este assunto mais profundamente no capítulo <a href="classes-basicas.html#classes-basicas">7</a>. </p>
</div>
<div id="criando-vetores" class="section level2" number="2.10">
<h2>
<span class="header-section-number">2.10</span> Criando Vetores<a class="anchor" aria-label="anchor" href="#criando-vetores"><i class="fas fa-link"></i></a>
</h2>
<p>Nos exemplos anteriores criamos objetos simples tal como <code>x &lt;- 1</code> e <code>x &lt;- 'abc'</code>. Enquanto isso é suficiente para demonstrar os comandos básicos do R, na prática tais comandos são bastante limitados, uma vez que um problema real de análise de dados certamente irá ter um maior volume de informações do mundo real.</p>
<p>Um dos procedimentos mais utilizados no R é a criação de vetores atômicos. Esses são objetos que guardam uma série de elementos. Todos os elementos de um vetor atômico devem possuir a mesma classe, o que justifica a sua propriedade <em>atômica</em>. Um exemplo seria representar no R uma série de preços diários de uma ação. Tal série possui vários valores numéricos que formam um vetor da classe numérica.</p>
<p><strong>Vetores atômicos são criados no R através do uso do comando <code>c</code>, o qual é oriundo do verbo em inglês <em>combine</em>.</strong> Por exemplo, caso eu quisesse <em>combinar</em> os valores 1, 2 e 3 em um objeto/vetor, eu poderia fazê-lo através do seguinte comando: </p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vector</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 1 2 3</code></pre>
<p>Esse comando funciona da mesma maneira para qualquer número de elementos. Caso necessário, poderíamos criar um vetor com mais elementos simplesmente adicionando valores após o <code>3</code>, tal como em <code>x &lt;- c(1, 2, 3, 4, 5)</code>.</p>
<p>O uso do comando <code>c</code> não é exclusivo para vetores numéricos. Por exemplo, poderíamos criar um vetor de outra classe de dados, tal como <em>character</em>:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'text 1'</span>, <span class="st">'text 2'</span>, <span class="st">'text 3'</span>, <span class="st">'text 4'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "text 1" "text 2" "text 3" "text 4"</code></pre>
<p>A única restrição no uso do comando <code>c</code> é que todos os itens do vetor <strong>tenham a mesma classe</strong>. Se inserirmos dados de classes diferentes, o R irá tentar transformar os itens para a mesma classe seguindo uma lógica própria, onde a classe mais complexa sempre tem preferência. Caso ele não consiga transformar todos os elementos para uma classe só, uma mensagem de erro será retornada. Observe no próximo exemplo como os valores numéricos no primeiro e segundo elemento de <code>x</code> são transformados para a classe de caracteres.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># numeric class</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "numeric"</code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># character class</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="st">'3'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "character"</code></pre>
<p>Outra utilização do comando <code>c</code> é a combinação de vetores. De fato, isto é exatamente o que fizemos ao executar o código <code>c(1, 2, 3)</code>. Neste caso, cada vetor possuía um elemento. Podemos realizar o mesmo com vetores maiores. Veja a seguir:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x and y</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print concatenation between x and y</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 1 2 3 4 5</code></pre>
<p>Portanto, o comando <code>c</code> possui duas funções principais: criar e combinar vetores.</p>
</div>
<div id="conhecendo-os-objetos-criados" class="section level2" number="2.11">
<h2>
<span class="header-section-number">2.11</span> Conhecendo os Objetos Criados<a class="anchor" aria-label="anchor" href="#conhecendo-os-objetos-criados"><i class="fas fa-link"></i></a>
</h2>
<p>Após a execução de diversos comandos no editor ou <em>prompt</em>, é desejável saber quais são os objetos criados pelo código. É possível descobrir essa informação simplesmente olhando para o lado direito superior do RStudio, na aba da área de trabalho. Porém, existe um comando que sinaliza a mesma informação no <em>prompt</em>. Com o fim de saber quais são as variáveis atualmente disponíveis na memória do R, pode-se utilizar o comando <code>ls</code>. Observe o exemplo a seguir: </p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vars</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="co"># show current objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "x" "y" "z"</code></pre>
<p>Os objetos <code>x</code>, <code>y</code> e <code>z</code> foram criados e estavam disponíveis no ambiente de trabalho atual, juntamente com outros objetos. Para descobrir os valores dos mesmos, basta digitar os nomes dos objetos e apertar <code>enter</code> no <em>prompt</em>:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre></div>
<pre><code>R&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span></span></code></pre></div>
<pre><code>R&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span></span></code></pre></div>
<pre><code>R&gt; [1] 3</code></pre>
<p>Destaca-se que digitar o nome do objeto na tela tem o mesmo resultado que utilizar a função <code>print</code>. De fato, ao executar o nome de uma variável, internamente o R passa esse objeto para a função <code>print</code>.</p>
<p>No R, conforme já mostrado, todos os objetos pertencem a alguma classe. Para descobrir a classe de um objeto, basta utilizar a função <code>class</code>. Observe no exemplo a seguir que <code>x</code> é um objeto da classe numérica e <code>y</code> é um objeto da classe de texto (<em>character</em>). </p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vars</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="st">'a'</span></span>
<span></span>
<span><span class="co"># check classes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "numeric"</code></pre>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "character"</code></pre>
<p>Outra maneira de conhecer melhor um objeto é verificar a sua representação em texto. Todo objeto no R possui uma representação textual e a verificação desta é realizada através da função <code>str</code>: </p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print textual representation of a vector</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  int [1:10] 1 2 3 4 5 6 7 8 9 10
R&gt; NULL</code></pre>
<p>Essa função é particularmente útil quando se está tentando entender os detalhes de um objeto mais complexo, tal como uma tabela. A utilidade da representação textual é que nela aparece o tamanho do objeto e suas classes internas. Nesse caso, o objeto <code>x</code> é da classe <em>integer</em> e possui dez elementos.</p>
</div>
<div id="mostrando-e-formatando-informações-na-tela" class="section level2" number="2.12">
<h2>
<span class="header-section-number">2.12</span> Mostrando e Formatando Informações na Tela<a class="anchor" aria-label="anchor" href="#mostrando-e-formatando-informa%C3%A7%C3%B5es-na-tela"><i class="fas fa-link"></i></a>
</h2>
<p>Como já vimos, é possível mostrar o valor de uma variável na tela de duas formas, digitando o nome dela no <em>prompt</em> ou então utilizando a função <code>print</code>. Explicando melhor, a função <code>print</code> é voltada para a apresentação de objetos e pode ser customizada para qualquer tipo. Por exemplo, caso tivéssemos um objeto de classe chamada <code>MyTable</code> que representasse um objeto tabular, poderíamos criar uma função chamada <code>print.MyTable</code> que irá mostrar uma tabela na tela com um formato especial tal como número de linhas, nomes das colunas, etc. A função <code>print</code>, portanto, pode ser customizada para cada classe de objeto.</p>
<p>Porém, existem outras funções específicas para apresentar texto (e não objetos) no <em>prompt</em>. A principal delas é <code>message</code>. Essa toma como <em>input</em> um texto, processa-o para símbolos específicos e o apresenta na tela. Essa função é muito mais poderosa e personalizável do que <code>print</code>. </p>
<p>Por exemplo, caso quiséssemos mostrar na tela o texto <code>'O valor de x é igual a 2'</code>, poderíamos fazê-lo da seguinte forma:</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set var</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span></span>
<span><span class="co"># print with message()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">'The value of x is'</span>, <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; The value of x is2</code></pre>
<p>Função <code>message</code> também funciona para vetores:</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vec</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span></span>
<span></span>
<span><span class="co"># print with message()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">'The values in x are: '</span>, <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; The values in x are: 2345</code></pre>
<p>A customização da saída da tela é possível através de comandos específicos. Por exemplo, se quiséssemos quebrar a linha da tela, poderíamos fazê-lo através do uso do caractere reservado <code>\n</code>:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set char</span></span>
<span><span class="va">my_text</span> <span class="op">&lt;-</span> <span class="st">'First line,\nSecond Line,\nThird Line'</span></span>
<span></span>
<span><span class="co"># print with new lines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_text</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; First line,
R&gt; Second Line,
R&gt; Third Line</code></pre>
<p>Observe que o uso do <code>print</code> não resultaria no mesmo efeito, uma vez que esse comando apresenta o texto como ele é, sem processar para efeitos específicos:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_text</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "First line,\nSecond Line,\nThird Line"</code></pre>
<p>Outro exemplo no uso de comandos específicos para texto é adicionar um espaçamento <em>tab</em> no texto apresentado com o símbolo <code>\t</code>. Veja a seguir:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set char with \t</span></span>
<span><span class="va">my_text_1</span> <span class="op">&lt;-</span> <span class="st">'A and B'</span></span>
<span><span class="va">my_text_2</span> <span class="op">&lt;-</span> <span class="st">'\tA and B'</span></span>
<span><span class="va">my_text_3</span> <span class="op">&lt;-</span> <span class="st">'\t\tA and B'</span></span>
<span></span>
<span><span class="co"># print with message()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_text_1</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; A and B</code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_text_2</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  A and B</code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_text_3</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;      A and B</code></pre>
<p>Vale destacar que, na grande maioria dos casos de pesquisa, será necessário apenas o uso de <code>\n</code> para formatar textos de saída. Outras maneiras de manipular a saída de texto no <em>prompt</em> com base em símbolos específicos são encontradas no <a href="https://cran.r-project.org/doc/manuals/R-lang.html#Literal-constants">manual oficial do R</a>.</p>
<p>Parte do processo de apresentação de texto na tela é a customização do mesmo. Para isto, existem duas funções muito úteis: <code>paste</code> e <code>format</code>. </p>
<p>A função <code>paste</code> <em>cola</em> uma série de caracteres juntos. É uma função muito útil, a qual será utilizada intensamente para o resto dos exemplos deste livro. Observe o código a seguir:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set chars</span></span>
<span><span class="va">my_text_1</span> <span class="op">&lt;-</span> <span class="st">'I am a text'</span></span>
<span><span class="va">my_text_2</span> <span class="op">&lt;-</span> <span class="st">'very beautiful'</span></span>
<span><span class="va">my_text_3</span> <span class="op">&lt;-</span> <span class="st">'and informative.'</span></span>
<span></span>
<span><span class="co"># using paste and message</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">my_text_1</span>, <span class="va">my_text_2</span>, <span class="va">my_text_3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; I am a text very beautiful and informative.</code></pre>
<p>O resultado anterior não está muito longe do que fizemos no exemplo com a função <code>print</code>. Note, porém, que a função <code>paste</code> adiciona um espaço entre cada texto. Caso não quiséssemos esse espaço, poderíamos usar a função <code>paste0</code>: </p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using paste0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">my_text_1</span>, <span class="va">my_text_2</span>, <span class="va">my_text_3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; I am a textvery beautifuland informative.</code></pre>
<div class="rmdimportant">
<p>
Uma alternativa a função <code>message</code> é <code>cat</code>
(<em>concatenate and print</em>). Não é incomum encontrarmos códigos
onde mensagens para o usuário são transmitidas via <code>cat</code> e
não <code>message</code>. Como regra, dê preferência a
<code>message</code> pois esta é mais fácil de controlar. Por exemplo,
caso o usuário quiser silenciar uma função, omitindo todas saídas da
tela, bastaria usar o comando <code>suppressMessages</code>.
</p>
</div>
<p>Outra possibilidade muito útil no uso do <code>paste</code> é modificar o texto entre a junção dos itens a serem colados. Por exemplo, caso quiséssemos adicionar uma vírgula e espaço (<code>,</code>) entre cada item, poderíamos fazer isso através do uso do argumento <code>sep</code>, como a seguir:</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using custom separator</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">my_text_1</span>, <span class="va">my_text_2</span>, <span class="va">my_text_3</span>, sep <span class="op">=</span> <span class="st">', '</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; I am a text, very beautiful, and informative.</code></pre>
<p>Caso tivéssemos um vetor atômico com os elementos da frase em um objeto apenas, poderíamos atingir o mesmo resultado utilizando <code>paste</code> o argumento <em>collapse</em>:</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using paste with collapse argument</span></span>
<span><span class="va">my_text</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'Eu sou um texto'</span>, <span class="st">'muito bonito'</span>, <span class="st">'e charmoso.'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">my_text</span>, collapse <span class="op">=</span> <span class="st">', '</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; Eu sou um texto, muito bonito, e charmoso.</code></pre>
<p>Prosseguindo, o comando <code>format</code> é utilizado para formatar números e datas. É especialmente útil quando formos montar tabelas e buscarmos apresentar os números de uma maneira visualmente atraente. Por definição, o R apresenta uma série de dígitos após a vírgula:</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># message without formatting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 0.333333333333333</code></pre>
<p>Caso quiséssemos apenas dois dígitos aparecendo na tela, utilizaríamos o seguinte código:</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># message with format and two digits</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 0.33</code></pre>
<p>Tal como, também é possível mudar o símbolo de decimal:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># message with format and two digits</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, decimal.mark <span class="op">=</span> <span class="st">','</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 0,3333333</code></pre>
<p>Tal flexibilidade é muito útil quando devemos reportar resultados respeitando algum formato local tal como o Brasileiro.</p>
<p>Uma alternativa recente e muito interessante para o comando <code><a href="https://rdrr.io/r/base/paste.html">base::paste</a></code> é <code><a href="https://stringr.tidyverse.org/reference/str_c.html">stringr::str_c</a></code> e <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">stringr::str_glue</a></code>. Enquanto a primeira é quase idêntica a <code>paste0</code>, a segunda tem uma maneira pecular de juntar objetos. Veja um exemplo a seguir:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define some vars</span></span>
<span><span class="va">my_name</span> <span class="op">&lt;-</span> <span class="st">'Pedro'</span></span>
<span><span class="va">my_age</span> <span class="op">&lt;-</span> <span class="fl">23</span></span>
<span></span>
<span><span class="co"># using base::paste0</span></span>
<span><span class="va">my_str_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">'My name is '</span>, <span class="va">my_name</span>, <span class="st">' and my age is '</span>, <span class="va">my_age</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># using stringr::str_c</span></span>
<span><span class="va">my_str_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span><span class="op">(</span><span class="st">'My name is '</span>, <span class="va">my_name</span>, <span class="st">' and my age is '</span>, <span class="va">my_age</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># using stringr::str_glue</span></span>
<span><span class="va">my_str_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'My name is {my_name} and my age is {my_age}'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">my_str_1</span>, <span class="va">my_str_2</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">my_str_1</span>, <span class="va">my_str_3</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">my_str_2</span>, <span class="va">my_str_3</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] FALSE</code></pre>
<p>Como vemos, temos três alternativas para o mesmo resultado final. Note que <code>str_glue</code> usa de chaves para definir as variáveis dentro do próprio texto. Esse é um formato muito interessante e prático.</p>
</div>
<div id="conhecendo-o-tamanho-dos-objetos" class="section level2" number="2.13">
<h2>
<span class="header-section-number">2.13</span> Conhecendo o Tamanho dos Objetos<a class="anchor" aria-label="anchor" href="#conhecendo-o-tamanho-dos-objetos"><i class="fas fa-link"></i></a>
</h2>
<p>Na prática de programação com o R, é muito importante saber o tamanho das variáveis que estão sendo utilizadas. Isso serve não somente para auxiliar o usuário na verificação de possíveis erros do código, mas também para saber o tamanho necessário em certos procedimentos de iteração tal como <em>loops</em>, os quais serão tratados em capítulo futuro.</p>
<p>No R, o tamanho do objeto pode ser verificado com o uso de quatro principais funções: <code>length</code>, <code>nrow</code>, <code>ncol</code> e <code>dim</code>. </p>
<p>A função <code>length</code> é destinada a objetos com uma única dimensão, tal como vetores atômicos:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get length x</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># display message</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">'The length of x is'</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; The length of x is 6</code></pre>
<p>Para objetos com mais de uma dimensão, por exemplo matrizes e dataframes, utilizam-se as funções <code>nrow</code>, <code>ncol</code> e <code>dim</code> para descobrir o número de linhas (primeira dimensão) e o número de colunas (segunda dimensão). Veja a diferença a seguir.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set matrix and print it</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, nrow <span class="op">=</span> <span class="fl">4</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;      [,1] [,2] [,3] [,4] [,5]
R&gt; [1,]    1    5    9   13   17
R&gt; [2,]    2    6   10   14   18
R&gt; [3,]    3    7   11   15   19
R&gt; [4,]    4    8   12   16   20</code></pre>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find number of rows, columns and elements</span></span>
<span><span class="va">my_nrow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">my_ncol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">my_length</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print message</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">'\nThe number of lines in x is '</span>, <span class="va">my_nrow</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 
R&gt; The number of lines in x is  4</code></pre>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">'\nThe number of columns in x is '</span>, <span class="va">my_ncol</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 
R&gt; The number of columns in x is  5</code></pre>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">'\nThe number of elements in x is '</span>, <span class="va">my_length</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; 
R&gt; The number of elements in x is  20</code></pre>
<p>Já a função <code>dim</code> mostra a dimensão do objeto, resultando em um vetor numérico como saída. Essa deve ser utilizada quando o objeto tiver mais de duas dimensões. Na prática, esses casos são raros. Um exemplo para a variável <code>x</code> é dado a seguir:</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 4 5</code></pre>
<p>Para o caso de objetos com mais de duas dimensões, podemos utilizar a função <code>array</code> para criá-los e <code>dim</code> para descobrir o seu tamanho:</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set array with dimension</span></span>
<span><span class="va">my_array</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_array</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; , , 1
R&gt; 
R&gt;      [,1] [,2] [,3]
R&gt; [1,]    1    4    7
R&gt; [2,]    2    5    8
R&gt; [3,]    3    6    9
R&gt; 
R&gt; , , 2
R&gt; 
R&gt;      [,1] [,2] [,3]
R&gt; [1,]    1    4    7
R&gt; [2,]    2    5    8
R&gt; [3,]    3    6    9
R&gt; 
R&gt; , , 3
R&gt; 
R&gt;      [,1] [,2] [,3]
R&gt; [1,]    1    4    7
R&gt; [2,]    2    5    8
R&gt; [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print its dimension</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">my_array</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 3 3 3</code></pre>
<p>Uma observação importante aqui é que as funções <code>length</code>, <code>nrow</code>, <code>ncol</code> e <code>dim</code> não servem para descobrir o número de letras em um texto. Esse é um erro bastante comum. Por exemplo, caso tivéssemos um objeto do tipo texto e usássemos a função <code>length</code>, o resultado seria o seguinte:</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set char object</span></span>
<span><span class="va">my_char</span> <span class="op">&lt;-</span> <span class="st">'abcde'</span></span>
<span></span>
<span><span class="co"># find its length (and NOT number of characters)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">my_char</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 1</code></pre>
<p>Isso ocorre pois a função <code>length</code> retorna o número de elementos. Nesse caso, <code>my_char</code> possui apenas um elemento. Para descobrir o número de caracteres no objeto, utilizamos a função <code>nchar</code>, conforme a seguir:</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using nchar for number of characters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">my_char</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 5</code></pre>
<p>Reforçando, cada objeto no R tem suas propriedades e funções específicas para manipulação.</p>
</div>
<div id="selecionando-elementos-de-um-vetor-atômico" class="section level2" number="2.14">
<h2>
<span class="header-section-number">2.14</span> Selecionando Elementos de um Vetor Atômico<a class="anchor" aria-label="anchor" href="#selecionando-elementos-de-um-vetor-at%C3%B4mico"><i class="fas fa-link"></i></a>
</h2>
<p>Após a criação de um vetor atômico de qualquer classe, é possível que se esteja interessado em apenas um ou alguns elementos desse mesmo vetor. Por exemplo, caso estivéssemos buscando atualizar o valor de um portfólio de investimento, o nosso interesse dentro de um vetor contendo preços de uma ação é somente para o preço mais recente. Todos os demais preços não seriam relevantes para a nossa análise e, portanto, poderiam ser ignorados.</p>
<p>Esse processo de seleção de <em>pedaços</em> de um vetor atômico é chamado de indexação e é executado através do uso de colchetes <code>[]</code>. Observe o exemplo de código a seguir:</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set my_x</span></span>
<span><span class="va">my_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="fl">3.5</span>, <span class="fl">4.3</span><span class="op">)</span></span></code></pre></div>
<p>Se quiséssemos apenas o terceiro elemento de <code>my_x</code>, utilizaríamos o operador de colchete da seguinte forma:</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get third element of my_x</span></span>
<span><span class="va">elem_x</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">elem_x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 4</code></pre>
<p>Também podemos utilizar o comando <code>length</code>, apresentado anteriormente, para acessar o último elemento do vetor:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get last element of my_x</span></span>
<span><span class="va">last_elem</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">my_x</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">last_elem</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 4.3</code></pre>
<p>No caso de estarmos interessado apenas no último e penúltimo valor de <code>my_x</code> utilizaríamos o operador de sequência (<code>:</code>):</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get last and second last elements</span></span>
<span><span class="va">piece_x_1</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">my_x</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">my_x</span><span class="op">)</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">piece_x_1</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 3.5 4.3</code></pre>
<p>Uma propriedade única da linguagem R é que, caso for acessado uma posição que não existe no vetor, o programa retorna o valor <code>NA</code> (<em>not available</em>). Veja a seguir, onde tenta-se obter o quarto valor de um vetor com apenas três elementos.</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set vec</span></span>
<span><span class="va">my_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find fourth element (NA returned!)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_vec</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] NA</code></pre>
<p>É importante conhecer esse comportamento do R, pois o não tratamento desses erros pode gerar problemas difíceis de identificar em um código mais complexo. Em outras linguagens de programação, a tentativa de acesso a elementos não existentes geralmente retorna um erro e cancela a execução do resto do código. No caso do R, dado que o acesso a elementos inexistentes não gera erro, é possível que isso gere um problema em outras partes do <em>script</em>.</p>
<div class="rmdimportant">
<p>
Geralmente, a ocorrência de <code>NAs</code> (<em>Not Available</em>)
sugere a existência de problema no código. Saiba que <code>NA</code>
indicam a falta de dados e são contagiosos: tudo que interagir com
objeto do tipo <code>NA</code>, seja uma soma ou multiplicação, irá
também virar <code>NA</code>. <strong>O usuário deve prestar atenção
toda vez que surgirem valores <code>NA</code> de forma inesperada nos
objetos criados.</strong> Uma inspeção nos índices dos vetores pode ser
necessária.
</p>
</div>
<p>O uso de indexadores é muito útil quando se está procurando por itens de um vetor que satisfaçam alguma condição. Por exemplo, caso quiséssemos todos os valores de <code>my_x</code> que são maiores que 3, utilizaríamos o seguinte comando:</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get all values higher than 3</span></span>
<span><span class="va">piece_x_2</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span><span class="va">my_x</span><span class="op">&gt;</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">piece_x_2</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 5.0 4.0 7.0 3.5 4.3</code></pre>
<p>É possível também indexar por mais de uma condição através dos operadores de lógica <code>&amp;</code> (<em>e</em>) e <code>|</code> (<em>ou</em>). Por exemplo, caso quiséssemos os valores de <code>my_x</code> maiores que 2 e menores que 4, usaríamos o seguinte comando:</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get all values higher than 2 AND lower than 4</span></span>
<span><span class="va">piece_x_3</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span> <span class="op">(</span><span class="va">my_x</span><span class="op">&gt;</span><span class="fl">2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">my_x</span><span class="op">&lt;</span><span class="fl">4</span><span class="op">)</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">piece_x_3</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 3.0 3.5</code></pre>
<p>Da mesma forma, havendo interesse nos itens que são menores que 3 ou maiores que 6, teríamos:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get all values lower than 3 OR higher than 6</span></span>
<span><span class="va">piece_x_4</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span> <span class="op">(</span><span class="va">my_x</span><span class="op">&lt;</span><span class="fl">3</span><span class="op">)</span><span class="op">|</span><span class="op">(</span><span class="va">my_x</span><span class="op">&gt;</span><span class="fl">6</span><span class="op">)</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">piece_x_4</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] 1 2 7</code></pre>
<p>A indexação lógica também funciona com a interação de diferentes variáveis, isto é, podemos utilizar uma condição lógica em uma variável para selecionar itens em outra:</p>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set my_x and my_y</span></span>
<span><span class="va">my_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">8</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">my_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">10</span>, <span class="fl">14</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find elements in my_x where my_y are positive</span></span>
<span><span class="va">my_piece_x</span> <span class="op">&lt;-</span> <span class="va">my_x</span><span class="op">[</span> <span class="va">my_y</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_piece_x</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1]  6  8 12</code></pre>
<p>Olhando mais de perto o processo de indexação, vale salientar que, quando utilizamos uma condição de indexação dos dados, esta-se criando uma variável do tipo lógica. Essa toma apenas dois valores: <code>TRUE</code> (verdadeiro) ou <code>FALSE</code> (falso). É fácil perceber isso quando criamos o teste lógico em um objeto e o mostramos na tela:</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set logical object</span></span>
<span><span class="va">my_logical</span> <span class="op">&lt;-</span> <span class="va">my_y</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_logical</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show its class</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">my_logical</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "logical"</code></pre>
<p>As demais propriedades e operações com vetores lógicos serão explicadas em capítulo futuro.</p>
</div>
<div id="limpando-a-memória" class="section level2" number="2.15">
<h2>
<span class="header-section-number">2.15</span> Limpando a Memória<a class="anchor" aria-label="anchor" href="#limpando-a-mem%C3%B3ria"><i class="fas fa-link"></i></a>
</h2>
<p>Após a criação de diversas variáveis, o ambiente de trabalho do R pode ficar cheio de conteúdo já utilizado e dispensável. Nesse caso, é desejável limpar a memória do programa. Geralmente isso é realizado no começo de um <em>script</em>, de forma que toda vez que o script for executado, a memória estará totalmente limpa antes de qualquer cálculo. Além de desocupar a memória do computador, isso ajuda a evitar possíveis erros no código. Na grande maioria dos casos, porém, a limpeza do ambiente de trabalho deve ser realizada apenas uma vez.</p>
<p>Por exemplo, dada uma variável <code>x</code>, podemos excluí-la da memória com o comando <code>rm</code>, conforme mostrado a seguir: </p>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set x and y</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span></span>
<span><span class="co"># print all existing objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># remove x from memory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="st">'x'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print objects again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Observe que o objeto <code>x</code> não estará mais mais disponível após o uso do comando <code>rm('x')</code>.</p>
<p>Entretanto, em situações práticas é desejável limpar toda a memória utilizada por todos os objetos disponíveis no R. Pode-se atingir esse objetivo com o seguinte código:</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># clean up workspace (all existing objects)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>O termo <code>list</code> é um argumento da função <code>rm</code>, o qual define quais objetos serão eliminados. Já o comando <code><a href="https://rdrr.io/r/base/ls.html">ls()</a></code> mostra todas os objetos disponíveis atualmente. Portanto, ao encadear ambos os comandos, limpamos da memória <strong>todos</strong> os objetos disponíveis para o R. Como comentado, uma boa política de programação é sempre iniciar o <em>script</em> limpando a memória do R. .</p>
<div class="rmdcaution">
<p>
A limpeza da memória em <em>scripts</em> é uma estratégia
controversa. Alguns autores argumentam que é melhor não limpar a memória
pois isso pode apagar resultados importantes. Na minha opinião, acho
fundamental limpar a memória, desde que todos resultados sejam
reproduzíveis. Ao iniciar um código sempre do mesmo estado, isto é,
nenhuma variável criada, fica mais fácil de entender e capturar
possíveis <em>bugs</em>.
</p>
</div>
</div>
<div id="mostrando-e-mudando-o-diretório-de-trabalho" class="section level2" number="2.16">
<h2>
<span class="header-section-number">2.16</span> Mostrando e Mudando o Diretório de Trabalho<a class="anchor" aria-label="anchor" href="#mostrando-e-mudando-o-diret%C3%B3rio-de-trabalho"><i class="fas fa-link"></i></a>
</h2>
<p>Assim como outros softwares, <strong>o R sempre trabalha em algum diretório</strong>. É com base nesse diretório que o R procura arquivos para importar dados. É nesse mesmo diretório que o R salva arquivos, caso não definirmos um endereço no computador explicitamente. Essa saída pode ser um arquivo de uma figura, um arquivo de texto ou uma planilha eletrônica. <strong>Como boa prática de criação e organização de <em>scripts</em>, deve-se sempre mudar o diretório de trabalho para onde o arquivo do <em>script</em> está localizado</strong>.</p>
<p>Em sua inicialização, o R possui como diretório <em>default</em> a pasta de documentos do usuário cujo atalho é o tilda (<code>'~'</code>).</p>
<p>Para mostrar o diretório atual de trabalho, basta utilizar a função <code>getwd</code>: </p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get current directory</span></span>
<span><span class="va">my_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_dir</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] home/msperlin/adfeR/01-Book Content</code></pre>
<p>O resultado do código anterior mostra a pasta onde este livro foi escrito. Esse é o diretório onde os arquivos do livro foram compilados dentro do ambiente Linux.</p>
<p>A mudança de diretório de trabalho é realizada através do comando <code>setwd</code>. Por exemplo, caso quiséssemos mudar o nosso diretório de trabalho para <em>C:/Minha pesquisa/</em>, basta digitar no <em>prompt</em>:</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set dir</span></span>
<span><span class="va">my_d</span> <span class="op">&lt;-</span> <span class="st">'C:/Minha Pesquisa/'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">my_d</span><span class="op">)</span></span></code></pre></div>
<p>Enquanto para casos simples, como o anterior, lembrar o nome do diretório é fácil, em casos práticos o diretório de trabalho pode ser em um lugar mais profundo da raiz de diretórios do sistema de arquivos. Nessa situação, uma estratégia eficiente para descobrir a pasta de trabalho é utilizar um explorador de arquivos, tal como o <em>Explorer</em> no Windows. Abra esse aplicativo e vá até o local onde quer trabalhar com o seu <em>script</em>. Após isso, coloque o cursor na barra de endereço e selecione todo o endereço. Aperte <em>control+c</em> para copiar o endereço para a área de transferência. Volte para o seu código e cole o mesmo no código. <strong>Atenção nesta etapa, o Windows utiliza a barra invertida para definir endereços no computador, enquanto o R utiliza a barra normal</strong>. Caso tente utilizar a barra invertida, um erro será mostrado na tela. Veja o exemplo a seguir.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="operacoes-basicas.html#cb147-1" aria-hidden="true" tabindex="-1"></a>my_d <span class="ot">&lt;-</span> <span class="st">'C:\Minha pesquisa</span><span class="sc">\'</span></span>
<span id="cb147-2"><a href="operacoes-basicas.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="st">setwd(my_d)</span></span></code></pre></div>
<p>O erro terá a seguinte mensagem:</p>
<pre><code>Error: '\M' is an unrecognized escape in character string..."</code></pre>
<p>A justificativa para o erro é que a barra invertida <code>\</code> é um caractere reservado no R e não pode ser utilizado isoladamente. Caso precises, podes definí-lo no objeto de texto com dupla barra, tal como em <code>\\</code>. Veja no exemplo a seguir, onde a dupla barra é substituída por uma barra única:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set char with \</span></span>
<span><span class="va">my_char</span> <span class="op">&lt;-</span> <span class="st">'using \\'</span></span>
<span></span>
<span><span class="co"># print it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_char</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; using \</code></pre>
<p>A solução do problema é simples. Após copiar o endereço, modifique todas as barras para a barra normal, assim como no código a seguir:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_d</span> <span class="op">&lt;-</span> <span class="st">'C:/Minha pesquisa/'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">my_d</span><span class="op">)</span></span></code></pre></div>
<p>É possível também utilizar barras invertidas duplas <code>\\</code> na definição de diretórios, porém não se recomenda essa formatação, pois não é compatível com outros sistemas operacionais.</p>
<p>Outro ponto importante aqui é o uso de endereços relativos. Por exemplo, caso esteja trabalhando em um diretório que contém um subdiretório chamado <code>Data</code>, podes entrar nele com o seguinte código:</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change to subfolder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">'Data'</span><span class="op">)</span></span></code></pre></div>
<p>Outra possibilidade pouco conhecida no uso de <code>setwd</code> é que é possível entrar em níveis inferiores do sistema de diretórios com <code>..</code>, tal como em:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change to previous level</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">'..'</span><span class="op">)</span></span></code></pre></div>
<p>Portanto, caso estejas trabalhando no diretório <code>C:/My Research/</code> e executar o comando <code>setwd('..')</code>, o diretório atual de trabalho viraria <code>C:/</code>, um nível inferior a <code>C:/My Research/</code>.</p>
<p>Uma maneira mais moderna e pouco conhecida de definir o diretório de trabalho é usar as funções internas do RStudio. Este é um conjunto de funções que só funcionam dentro do RStudio e fornecem diversas informações sobre o arquivo sendo editado. Para descobrir o caminho do arquivo atual que está sendo editado no RStudio e configurar o diretório de trabalho para lá, você pode escrever:</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html">dirname</a></span><span class="op">(</span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/rstudioapi/reference/rstudio-editors.html">getActiveDocumentContext</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">my_path</span><span class="op">)</span></span></code></pre></div>
<p>Dessa forma, o <em>script</em> mudará o diretório para sua própria localização. Apesar de não ser um código exatamente elegante, ele é bastante funcional. Caso copie o arquivo para outro diretório, o valor de <code>my_path</code> muda para o novo diretório. Esteja ciente, no entanto, de que esse truque só funciona no editor de rotinas do RStudio e dentro de um arquivo salvo. O código não funcionará a partir do <em>prompt</em>. </p>
<div class="rmdimportant">
<p>
Outro truque bastante útil para definir diretórios de trabalho no R é
usar o símbolo <code>~</code>. Esse define a pasta
<code>‘Documentos’</code> no <em>Windows</em>, a qual é única para cada
usuário. Portanto, ao executar <code>setwd(‘~’)</code>, irás direcionar
o R a uma pasta de fácil acesso e livre modificação pelo usuário atual
do computador.
</p>
</div>
</div>
<div id="comentários-no-código" class="section level2" number="2.17">
<h2>
<span class="header-section-number">2.17</span> Comentários no Código<a class="anchor" aria-label="anchor" href="#coment%C3%A1rios-no-c%C3%B3digo"><i class="fas fa-link"></i></a>
</h2>
<p>Comentários são definidos usando o símbolo <code>#</code>. Qualquer texto a direita desse símbolo não será processado pelo R. Note que até a cor do código a direita do <em>hashtag</em> muda no RStudio. Isso dá liberdade para escrever o que for necessário dentro do <em>script</em>. Um exemplo:</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This is a comment</span></span>
<span><span class="co"># This is another comment</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">'abc'</span> <span class="co"># this is another comment, but mixed with code</span></span>
<span></span>
<span><span class="va">my_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>var1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,   <span class="co"># set var 1</span></span>
<span>             var2 <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>    <span class="co"># another var</span></span></code></pre></div>
<p><strong>Os comentários são uma eficiente maneira de comunicar qualquer informação importante que não pode ser inferida diretamente do código</strong>. O uso correto de comentários é tão importante quanto o código em si. Quando bem feitos, aumentam a reproducibilidade, organização e entendimento do código. Em geral, você deve evitar o uso de comentários que são muito óbvios ou muito genéricos. Por exemplo:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read a csv file</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span> <span class="op">(</span><span class="st">'MyDataFile.csv'</span><span class="op">)</span></span></code></pre></div>
<p>Como você pode ver, é bastante óbvio que a linha <code>df &lt;- read.csv('MyDataFile.csv')</code> está lendo um arquivo .csv. O nome da função, <code>read.csv</code> já afirma isso. Então, o comentário não foi bom pois não adicionou novas informações ao usuário. Uma melhor abordagem seria definir o autor, a descrição da funcionalidade do <em>script</em> e explicar melhor a origem e a última atualização do arquivo de dados. Vamos dar uma olhada:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Script for reproducing results of JOHN (2018)</span></span>
<span><span class="co"># Author: Mr Researcher (dontspamme@emailprovider.com)</span></span>
<span><span class="co"># Last script update: 2018-01-10</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># File downloaded from www.sitewithdatafiles.com/data-files/</span></span>
<span><span class="co"># The description of the data goes here</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Last file update: 2017-12-05</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">'MyDataFile.csv'</span><span class="op">)</span></span></code></pre></div>
<p>Com esses comentários, o usuário saberá o propósito do <em>script</em>, quem o escreveu e a data da última edição. A origem do arquivo e a data de atualização mais recente também estão disponíveis. Se o usuário quiser atualizar os dados, tudo o que ele tem a fazer é ir ao mencionado site e baixar o novo arquivo. Isso facilitará o uso futuro e o compartilhamento do <em>script</em>.</p>
<p>Outro uso de comentários é <strong>definir seções no código</strong>, como em:</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Script for reproducing results of JOHN (2018)</span></span>
<span><span class="co"># Author: Mr Researcher (dontspamme@emailprovider.com)</span></span>
<span><span class="co"># Last script update: 2018-01-10</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># File downloaded from www.sitewithdatafiles.com/data-files/</span></span>
<span><span class="co"># The description of the data goes here</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Last file update: 2017-12-05</span></span>
<span></span>
<span><span class="co"># Clean data -------------------------</span></span>
<span><span class="co"># - remove outliers</span></span>
<span><span class="co"># - remove unnecessary columns</span></span>
<span></span>
<span><span class="co"># Create descriptive tables ----------</span></span>
<span></span>
<span></span>
<span><span class="co"># Estimate models --------------------</span></span>
<span></span>
<span></span>
<span><span class="co"># Report results ---------------------</span></span></code></pre></div>
<p>O uso de uma longa linha de traços (<code>-</code>) é intencional. Isto faz com que o RStudio identifique as seções do código e apresente no espaço abaixo do editor de rotinas um atalho para acessar as correspondentes linhas de cada seção. Teste você mesmo, copie e cole o código acima em um novo script do RStudio, salve o mesmo, e verás que as seções aparecem em um botão entre o editor e o <em>prompt</em>. Desta forma, uma vez que você precisa mudar uma parte específica do código, você pode se dirigir rapidamente a seção desejada.</p>
<div class="rmdcaution">
<p>
Quando começar a compartilhar código com outras pessoas, logo
perceberás que os comentários são essenciais e esperados. Eles ajudam a
transmitir informações que não estão disponíveis no código. Uma nota
aqui, ao longo do livro você verá que os comentários do código são, na
maior parte do tempo, bastante óbvios. Isso foi intencional, pois
mensagens claras e diretas são importantes para novos usuários, os quais
fazem parte da audiência.
</p>
</div>
</div>
<div id="cancelando-a-execução-de-um-código" class="section level2" number="2.18">
<h2>
<span class="header-section-number">2.18</span> Cancelando a Execução de um Código<a class="anchor" aria-label="anchor" href="#cancelando-a-execu%C3%A7%C3%A3o-de-um-c%C3%B3digo"><i class="fas fa-link"></i></a>
</h2>
<p>Toda vez que o R estiver executando algum código, uma sinalização visual no formato de um pequeno círculo vermelho no canto direito do <em>prompt</em> irá aparecer. Caso conseguir ler (o símbolo é pequeno em monitores modernos), o texto indica o termo <em>stop</em>. Esse símbolo não somente indica que o programa ainda está rodando mas também pode ser utilizado para cancelar a execução de um código. Para isso, basta clicar no referido botão. Outra maneira de cancelar uma execução é apontar o mouse no <em>prompt</em> e pressionar a tecla <em>Esc</em> no teclado.</p>
<p>Para testar o cancelamento de código, copie e cole o código a seguir em um <em>script</em> do RStudio. Após salvar, rode o mesmo com <code>control+shift+s</code>.</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">'\nRunning code (please make it stop by hitting esc!)'</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>O código anterior usa um comando especial do tipo <code>for</code> para mostrar a mensagem a cada segundo. Neste caso, o código demorará 100 segundos para rodar. Caso não desejes esperar, aperte <code>esc</code> para cancelar a execução. Por enquanto, não se preocupe com as funções utilizadas no exemplo. Iremos discutir o uso do comando <code>for</code> no capítulo <a href="programacao.html#programacao">8</a>.</p>
</div>
<div id="procurando-ajuda" class="section level2" number="2.19">
<h2>
<span class="header-section-number">2.19</span> Procurando Ajuda<a class="anchor" aria-label="anchor" href="#procurando-ajuda"><i class="fas fa-link"></i></a>
</h2>
<p>Uma tarefa muito comum no uso do R é procurar ajuda. A quantidade de funções disponíveis para o R é gigantesca e memorizar todas peculariedades é quase impossível. Assim, até mesmo usuários avançados comumente procuram ajuda sobre tarefas específicas no programa, seja para entender detalhes sobre algumas funções ou estudar um novo procedimento. Portanto, saibas que o uso do sistema de ajuda do R faz parte do cotidiano.</p>
<p>É possível buscar ajuda utilizando tanto o painel de <em>help</em> do RStudio como diretamente do <em>prompt</em>. Para isso, basta digitar o ponto de interrogação junto ao objeto sobre o qual se deseja ajuda, tal como em <code><a href="https://rdrr.io/r/base/mean.html">?mean</a></code>. Nesse caso, o objeto <code>mean</code> é uma função e o uso do comando irá abrir o painel de ajuda sobre ela. </p>
<p>No R, toda tela de ajuda de uma função é igual, conforme se vê na Figura <a href="operacoes-basicas.html#fig:ExemploAjuda">2.7</a> apresentada a seguir. Esta mostra uma descrição da função <code>mean</code>, seus argumentos de entrada explicados e também o seu objeto de saída. A tela de ajuda segue com referências e sugestões para outras funções relacionadas. Mais importante, os <strong>exemplos de uso da função</strong> aparecem por último e podem ser copiados e colados para acelerar o aprendizado no uso da função.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:ExemploAjuda"></span>
<img src="00-text-resources/figs/ExemploAjuda.png" alt="Tela de ajuda da função mean" width="100%"><p class="caption">
Figura 2.7: Tela de ajuda da função mean
</p>
</div>
<p>Caso quiséssemos procurar um termo nos arquivos de ajuda, bastaria utilizar o comando <code>??"standard deviation"</code>. Essa operação irá procurar a ocorrência do termo em todos os pacotes do R e é muito útil para aprender como realizar alguma operação, nesse caso o cálculo de desvio padrão.</p>
<p>Como sugestão, o ponto inicial e mais direto para aprender uma nova função é observando o seu exemplo de uso, localizada no final da página de ajuda. Com isto, podes verificar quais tipos de objetos de entrada a mesma aceita e qual o formato e o tipo de objeto na sua saída. Após isso, leia atentamente a tela de ajuda para entender se a mesma faz exatamente o que esperas e quais são as suas opções de uso nas respectivas entradas. Caso a função realizar o procedimento desejado, podes copiar e colar o exemplo de uso para o teu próprio <em>script</em>, ajustando onde for necessário.</p>
<p>Outra fonte muito importante de ajuda é a própria internet. Sites como <a href="http://stackoverflow.com/"><em>stackoverflow.com</em></a> e <em>mailing lists</em> específicos do R, cujo conteúdo também está na internet, são fontes preciosas de informação. Havendo alguma dúvida que não foi possível solucionar via leitura dos arquivos de ajuda do R, vale o esforço de procurar uma solução via mecanismo de busca na internet. Em muitas situações, o seu problema, por mais específico que seja, já ocorreu e já foi solucionado por outros usuários.</p>
<p>Caso estiver recebendo uma mensagem de erro enigmática, outra dica é copiar e colar a mesma para uma pesquisa no Google. Aqui apresenta-se outro benefício do uso da língua inglesa. É mais provável que encontres a solução se o erro for escrito em inglês, dado o maior número de usuários na comunidade global. Caso não encontrar uma solução desta forma, podes inserir uma pergunta no <a href="http://stackoverflow.com/">stackoverflow</a> ou no <a href="https://www.facebook.com/groups/1410023525939155/">grupo Brasileiro do R no Facebook</a>.</p>
<div class="rmdcaution">
<p>
Toda vez que for pedir ajuda na internet, procure sempre 1) descrever
claramente o seu problema e 2) adicionar um código reproduzível do seu
problema. Assim, o leitor pode facilmente verificar o que está
acontecendo ao rodar o exemplo no seu computador. Não tenho dúvida que,
se respeitar ambas regras, logo uma pessoa caridosa lhe ajudará com o
seu problema.
</p>
</div>
</div>
<div id="utilizando-code-completion-com-a-tecla-tab" class="section level2" number="2.20">
<h2>
<span class="header-section-number">2.20</span> Utilizando <em>Code Completion</em> com a Tecla <em>tab</em><a class="anchor" aria-label="anchor" href="#utilizando-code-completion-com-a-tecla-tab"><i class="fas fa-link"></i></a>
</h2>
<p>Um dos recursos mais úteis do RStudio é o preenchimento automático de código (<em>code completion</em>). Essa é uma ferramenta de edição que facilita o encontro de nomes de objetos, nome de pacotes, nome de arquivos e nomes de entradas em funções. O seu uso é muito simples. Após digitar um texto qualquer, basta apertar a tecla <em>tab</em> e uma série de opções aparecerá. Veja a Figura <a href="operacoes-basicas.html#fig:autocomplete">2.8</a> apresentada a seguir, em que, após digitar a letra <em>f</em> e apertar <em>tab</em>, aparece uma janela com uma lista de objetos que iniciam com a respectiva letra.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:autocomplete"></span>
<img src="00-text-resources/figs/autocomplete_objetos.png" alt="Uso do autocomplete para objetos" width="100%"><p class="caption">
Figura 2.8: Uso do autocomplete para objetos
</p>
</div>
<p>Essa ferramenta também funciona para pacotes. Para verificar, digite <code><a href="https://rdrr.io/r/base/library.html">library(r)</a></code> no <em>prompt</em> ou no editor, coloque o cursor entre os parênteses e aperte <em>tab</em>. O resultado deve ser algo parecido com a figura <a href="operacoes-basicas.html#fig:autocomplete-pacotes">2.9</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:autocomplete-pacotes"></span>
<img src="00-text-resources/figs/autocomplete_pacotes.png" alt="Uso do autocomplete para pacotes" width="100%"><p class="caption">
Figura 2.9: Uso do autocomplete para pacotes
</p>
</div>
<p>Observe que uma descrição do pacote ou objeto também é oferecida. Isso facilita bastante o dia a dia, pois a memorização das funcionalidades e dos nomes dos pacotes e os objetos do R não é uma tarefa fácil. O uso do <em>tab</em> diminui o tempo de investigação dos nomes e evita possíveis erros de digitação na definição destes.</p>
<p>O uso dessa ferramenta torna-se ainda mais benéfico quando os objetos são nomeados com algum tipo de padrão. No restante do livro observarás que os objetos tendem a ser nomeados com o prefixo <em>my</em>, como em <code>my_x</code>, <code>my_num</code>. O uso desse padrão facilita o encontro futuro do nome dos objetos, pois basta digitar <em>my</em>, apertar <em>tab</em> e uma lista de todos os objetos criados pelo usuário aparecerá.</p>
<p>Outro uso do <em>tab</em> é no encontro de arquivos e pastas no computador. Basta criar uma variável como <code>my_file &lt;- " "</code>, apontar o cursor para o meio das aspas e apertar a tecla <em>tab</em>. Uma tela com os arquivos e pastas do diretório atual de trabalho aparecerá, conforme mostrado na figura <a href="operacoes-basicas.html#fig:autocomplete-arquivos">2.10</a>. Nesse caso específico, o R estava direcionado para a minha pasta de códigos, em que é possível enxergar diversos trabalhos realizados no passado.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:autocomplete-arquivos"></span>
<img src="00-text-resources/figs/autocomplete_arquivos.png" alt="Uso do autocomplete para arquivos" width="100%"><p class="caption">
Figura 2.10: Uso do autocomplete para arquivos
</p>
</div>
<p>Uma dica aqui é utilizar o <em>tab</em> com a raiz do computador. Assumindo que o disco do seu computador está alocado para <code>C:/</code>, digite <code>my_file &lt;- "C:/"</code> e pressione <em>tab</em> após o símbolo <code>/</code>. Uma tela com os arquivos da raiz do computador aparecerá no RStudio. Podes facilmente navegar o sistema de arquivos utilizando as setas e <em>enter</em>.</p>
<p>O <em>autocomplete</em> também funciona para encontrar e definir as entradas de uma função. Por se tratar de um tópico mais avançado, deixamos o seu uso e demonstração para o capítulo <a href="programacao.html#programacao">8</a>.</p>
<div class="rmdimportant">
<p>
O <em>autocomplete</em> é uma das ferramentas mais importantes do
RStudio, funcionando para encontro de objetos, locais no disco rígido,
pacotes e funções. Acostume-se a utilizar a tecla <em>tab</em> o quanto
antes e logo verá como fica mais fácil escrever código rapidamente, e
sem erros de digitação.
</p>
</div>
</div>
<div id="interagindo-com-arquivos-e-o-sistema-operacional" class="section level2" number="2.21">
<h2>
<span class="header-section-number">2.21</span> Interagindo com Arquivos e o Sistema Operacional<a class="anchor" aria-label="anchor" href="#interagindo-com-arquivos-e-o-sistema-operacional"><i class="fas fa-link"></i></a>
</h2>
<p>Em muitas situações de uso do R será necessário interagir com os arquivos do computador, seja criando novas pastas, descompactando e compactando arquivos, listando e removendo arquivos do disco rígido do computador ou qualquer outro tipo de operação. Na grande maioria dos casos, o interesse é na manipulação de arquivos contendo dados.</p>
<div id="listando-arquivos-e-pastas" class="section level3" number="2.21.1">
<h3>
<span class="header-section-number">2.21.1</span> Listando Arquivos e Pastas<a class="anchor" aria-label="anchor" href="#listando-arquivos-e-pastas"><i class="fas fa-link"></i></a>
</h3>
<p>Para listar arquivos do computador, basta utilizar o função <code>list.files</code>. O argumento <code>path</code> define o diretório para listar os arquivos. Na construção deste livro foi criado um diretório chamado <em>00-text-resources/data</em>, onde alguns dados são salvos. Pode-se verificar os arquivos nessa pasta com o seguinte código:</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"00-text-resources/data"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_f</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] "00-text-resources/data/AdjustedPrices-InternacionalIndices.RDATA"
R&gt; [2] "00-text-resources/data/BovStocks_2011-12-01_2016-11-29.csv"      
R&gt; [3] "00-text-resources/data/BovStocks_2011-12-01_2016-11-29.RData"    
R&gt; [4] "00-text-resources/data/example_gethfdata.RDATA"                  
R&gt; [5] "00-text-resources/data/FileWithLatinChar_ISO-8859-9.txt"</code></pre>
<p>Observe que nesse diretório encontram-se vários arquivos <em>.csv</em>, <em>.rds</em> e <em>.xlsx</em>. Esses contêm dados que serão utilizados em capítulos futuros. Recomenda-se utilizar o argumento <code>full.names</code> como <code>TRUE</code>, o qual faz com que o retorno da função <code>list.files</code> contenha o caminho completo do arquivo. Isso facilita, por exemplo, uma possível importação de dados em que é necessário indicar não somente o nome do arquivo, mas a sua localização completa no computador. Destaca-se que também é possível listar os arquivos de forma recursiva, isto é, listar os arquivos de subpastas do endereço original. Para verificar, tente utilizar o seguinte código no seu computador:</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list all files recursively</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">T</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>O comando anterior irá listar todos os arquivos existentes na pasta atual e subpastas de trabalho. Dependendo de onde o comando foi executado, pode levar um certo tempo para o término do processo. Caso precisar cancelar a execução, aperte <em>esc</em> no teclado.</p>
<p>Para listar pastas (diretórios) do computador, basta utilizar o comando <code>list.dirs</code>. Veja a seguir.</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list directories</span></span>
<span><span class="va">my_dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.dirs</a></span><span class="op">(</span>recursive <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">my_dirs</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  [1] "./_book"                     
R&gt;  [2] "./_bookdown_files"           
R&gt;  [3] "./.Rproj.user"               
R&gt;  [4] "./00-code-resources"         
R&gt;  [5] "./00-text-resources"         
R&gt;  [6] "./adfeR_pt_ed03_cache"       
R&gt;  [7] "./adfeR_pt_ed03_files"       
R&gt;  [8] "./adfeR_pt_ed03-ONLINE_cache"
R&gt;  [9] "./adfeR_pt_ed03-ONLINE_files"
R&gt; [10] "./gdfpd2_cache"              
R&gt; [11] "./gfred_cache"               
R&gt; [12] "./many_datafiles"            
R&gt; [13] "./quandl_cache"              
R&gt; [14] "./tabs"                      
R&gt; [15] "./TD Files"</code></pre>
<p>No caso anterior, o comando lista todos os diretórios do trabalho atual sem recursividade. A saída do comando mostra os diretórios que utilizei para escrever este livro. Isso inclui o diretório de saída do livro (<code>./_book</code>), entre diversos outros. Nesse mesmo diretório, encontram-se os capítulos do livro, organizados por arquivos e baseados na linguagem <em>RMarkdown</em> (<code>.Rmd</code>). Para listar somente os arquivos com extensão <code>.Rmd</code>, utiliza-se o argumento <code>pattern</code> da função <code>list.files</code>, como a seguir:</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"*.Rmd$"</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  [1] "_BemVindo.Rmd"                             
R&gt;  [2] "00a-Sobre-NovaEdicao.Rmd"                  
R&gt;  [3] "00b-Prefacio.Rmd"                          
R&gt;  [4] "01-Introducao.Rmd"                         
R&gt;  [5] "02-Operacoes-Basicas.Rmd"                  
R&gt;  [6] "03-Scripts-Pesquisa.Rmd"                   
R&gt;  [7] "04-Importacao-Exportacao-Local.Rmd"        
R&gt;  [8] "05-Importacao-Internet.Rmd"                
R&gt;  [9] "06-Objetos-Armazenamento.Rmd"              
R&gt; [10] "07-Objetos-Basicos.Rmd"                    
R&gt; [11] "08-Programacao-com-R--ONLINE.Rmd"          
R&gt; [12] "09-Limpando-Estruturando-Dados--ONLINE.Rmd"
R&gt; [13] "10-Figuras--ONLINE.Rmd"                    
R&gt; [14] "11-Modelagem--ONLINE.Rmd"                  
R&gt; [15] "12-Reportando-resultados--ONLINE.Rmd"      
R&gt; [16] "13-Otimizacao-código--ONLINE.Rmd"          
R&gt; [17] "14-Referencias.Rmd"                        
R&gt; [18] "adfeR_pt_ed03-ONLINE.Rmd"                  
R&gt; [19] "index.Rmd"</code></pre>
<p>O texto <code>*.Rmd$</code> orienta o R a procurar todos arquivos que terminam o seu nome com o texto <em>.Rmd</em>. Os símbolos <code>'*''</code> e <code>'$'</code> são operadores específicos para o encontro de padrões em texto em uma linguagem chamada regex (<em>regular expressions</em>) e, nesse caso, indicam que o usuário quer encontrar todos arquivos com extensão <em>.Rmd</em>. O símbolo ’*’ diz para ignorar qualquer texto anterior a ‘.Rmd’ e ‘$’ indica o fim do nome do arquivo. Os arquivos apresentados anteriormente contêm todo o conteúdo deste livro, incluindo este próprio parágrafo, localizado no arquivo <code>02-OperacoesBasicas.Rmd</code>!</p>
</div>
<div id="apagando-arquivos-e-diretórios" class="section level3" number="2.21.2">
<h3>
<span class="header-section-number">2.21.2</span> Apagando Arquivos e Diretórios<a class="anchor" aria-label="anchor" href="#apagando-arquivos-e-diret%C3%B3rios"><i class="fas fa-link"></i></a>
</h3>
<p>A remoção de arquivos é realizada através do comando <code>file.remove</code>:</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create temporary file</span></span>
<span><span class="va">my_file</span> <span class="op">&lt;-</span> <span class="st">'MyTemp.csv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>          file <span class="op">=</span> <span class="va">my_file</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># delete it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="va">my_file</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] TRUE</code></pre>
<p>Lembre-se que deves ter permissão do seu sistema operacional para apagar um arquivo. Para o nosso caso, o retorno <code>TRUE</code> mostra que a operação teve sucesso.</p>
<p>Para deletar diretórios e todos os seus elementos, utilizamos <code>unlink</code>:</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create temp dir</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="st">'temp'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fill it with file</span></span>
<span><span class="va">my_file</span> <span class="op">&lt;-</span> <span class="st">'temp/tempfile.csv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>,</span>
<span>          file <span class="op">=</span> <span class="va">my_file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'temp'</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>A função, neste caso, não retorna nada. Podes checar se o diretório existe com <code>dir.exists</code>:</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="st">'temp'</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; [1] FALSE</code></pre>
<div class="rmdcaution">
<p>
Não preciso nem dizer, <strong>tenha muito cuidado</strong> com
comandos <code>file.remove</code> e <code>unlink</code>, principalmente
quando utilizar a recursividade (<code>recursive = TRUE</code>). Uma
execução errada e partes importantes do seu disco rídigo podem ser
apagadas, deixando o seu computador inoperável. Vale salientar que o R
<strong>realmente apaga</strong> os arquivos e não somente manda para a
lixeira. Portanto, ao apagar diretórios com <code>unlink</code>, não
poderás recuperar os arquivos.
</p>
</div>
</div>
<div id="utilizando-arquivos-e-diretórios-temporários" class="section level3" number="2.21.3">
<h3>
<span class="header-section-number">2.21.3</span> Utilizando Arquivos e Diretórios Temporários<a class="anchor" aria-label="anchor" href="#utilizando-arquivos-e-diret%C3%B3rios-tempor%C3%A1rios"><i class="fas fa-link"></i></a>
</h3>
<p>Um aspecto interessante do R é que ele possui uma pasta temporária que é criado na inicialização do programa. Esse diretório serve para guardar quaisquer arquivos descartáveis gerados pelo R. A cada nova sessão do R, um novo diretório temporário é criado. Ao inicializarmos o computador, essa pasta temporária é deletada.</p>
<p>O endereço do diretório temporário de uma sessão do R é verificado com <code>tempdir</code>:</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tempdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">'My tempdir is {my_tempdir}'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; My tempdir is /tmp/RtmpN2n71F</code></pre>
<p>O último texto do diretório, neste caso RtmpN2n71F é aleatóriamente definido e irá trocar a cada nova sessão do R.</p>
<p>A mesma dinâmica é encontrada para nomes de arquivos. Caso queira, por algum motivo, utilizar um nome temporário e aleatório para algum arquivo com extensão <em>.txt</em>, utilize <code>tempfile</code> e defina a entrada <code>fileext</code>:</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tempfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.txt'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="va">my_tempfile</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; /tmp/RtmpN2n71F/file11cf43d05d89.txt</code></pre>
<p>Note que o nome do arquivo – file11cf43d05d89.txt – é totalmente aleatório e mudará a cada chamada de <code>tempfile</code>.</p>
</div>
<div id="baixando-arquivos-da-internet" class="section level3" number="2.21.4">
<h3>
<span class="header-section-number">2.21.4</span> Baixando Arquivos da Internet<a class="anchor" aria-label="anchor" href="#baixando-arquivos-da-internet"><i class="fas fa-link"></i></a>
</h3>
<p>O R pode baixar arquivos da Internet diretamente no código. Isso é realizado com a função <code>download.file</code>. Veja o exemplo a seguir, onde baixamos uma planilha de Excel do site da Microsoft para um arquivo temporário:</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set link</span></span>
<span><span class="va">link_dl</span> <span class="op">&lt;-</span> <span class="st">'go.microsoft.com/fwlink/?LinkID=521962'</span></span>
<span><span class="va">local_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.xlsx'</span><span class="op">)</span> <span class="co"># name of local file</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span>url <span class="op">=</span> <span class="va">link_dl</span>,</span>
<span>              destfile <span class="op">=</span> <span class="va">local_file</span><span class="op">)</span></span></code></pre></div>
<p>O uso de <code>download.file</code> é bastante prático quando se está trabalhando com dados da Internet que são constantemente atualizados. Basta baixar e atualizar o arquivo com dados no início do <em>script</em>. Poderíamos continuar a rotina lendo o arquivo baixado e realizando a nossa análise dos dados disponíveis.</p>
<p>Um exemplo nesse caso é a tabela de empresas listadas na bolsa divulgada pela CVM (comissão de valores mobiliários). A tabela está disponível em um arquivo no <a href="http://dados.cvm.gov.br/dados/CIA_ABERTA/CAD/DADOS/cad_cia_aberta.csv">site</a>. Podemos baixar o arquivo e, logo em seguida, ler os dados.</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set destination link and file</span></span>
<span><span class="va">my_link</span> <span class="op">&lt;-</span> <span class="st">'http://dados.cvm.gov.br/dados/CIA_ABERTA/CAD/DADOS/cad_cia_aberta.csv'</span></span>
<span><span class="va">my_destfile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.csv'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># download file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span><span class="va">my_link</span>, </span>
<span>              destfile <span class="op">=</span> <span class="va">my_destfile</span>, </span>
<span>              mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># read it</span></span>
<span><span class="va">df_cvm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv2</a></span><span class="op">(</span><span class="va">my_destfile</span>,</span>
<span>                     <span class="co">#delim = '\t',</span></span>
<span>                     locale <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">'Latin1'</span><span class="op">)</span>,</span>
<span>                     col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt; ℹ Using "','" as decimal and "'.'" as grouping mark. Use `read_delim()` for more control.</code></pre>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check available columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df_cvm</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>R&gt;  [1] "CNPJ_CIA"           "DENOM_SOCIAL"      
R&gt;  [3] "DENOM_COMERC"       "DT_REG"            
R&gt;  [5] "DT_CONST"           "DT_CANCEL"         
R&gt;  [7] "MOTIVO_CANCEL"      "SIT"               
R&gt;  [9] "DT_INI_SIT"         "CD_CVM"            
R&gt; [11] "SETOR_ATIV"         "TP_MERC"           
R&gt; [13] "CATEG_REG"          "DT_INI_CATEG"      
R&gt; [15] "SIT_EMISSOR"        "DT_INI_SIT_EMISSOR"
R&gt; [17] "CONTROLE_ACIONARIO" "TP_ENDER"          
R&gt; [19] "LOGRADOURO"         "COMPL"             
R&gt; [21] "BAIRRO"             "MUN"               
R&gt; [23] "UF"                 "PAIS"              
R&gt; [25] "CEP"                "DDD_TEL"           
R&gt; [27] "TEL"                "DDD_FAX"           
R&gt; [29] "FAX"                "EMAIL"             
R&gt; [31] "TP_RESP"            "RESP"              
R&gt; [33] "DT_INI_RESP"        "LOGRADOURO_RESP"   
R&gt; [35] "COMPL_RESP"         "BAIRRO_RESP"       
R&gt; [37] "MUN_RESP"           "UF_RESP"           
R&gt; [39] "PAIS_RESP"          "CEP_RESP"          
R&gt; [41] "DDD_TEL_RESP"       "TEL_RESP"          
R&gt; [43] "DDD_FAX_RESP"       "FAX_RESP"          
R&gt; [45] "EMAIL_RESP"         "CNPJ_AUDITOR"      
R&gt; [47] "AUDITOR"</code></pre>
<p>Existem diversas informações interessantes nestes dados incluindo nome e CNPJ de empresas listadas (ou deslistadas) da bolsa de valores Brasileira. E, mais importante, o arquivo está sempre atualizado. O código anterior estará sempre buscando os dados mais recentes a cada execução.</p>
</div>
</div>
<div id="exerc-operacoes-basicas" class="section level2" number="2.22">
<h2>
<span class="header-section-number">2.22</span> Exercícios<a class="anchor" aria-label="anchor" href="#exerc-operacoes-basicas"><i class="fas fa-link"></i></a>
</h2>
<hr>
<p><span id="webex-total_correct"></span></p>
<div id="q.1-1" class="section level3 unnumbered">
<h3>Q.1<a class="anchor" aria-label="anchor" href="#q.1-1"><i class="fas fa-link"></i></a>
</h3>
<p>Crie um novo <em>script</em>, salve o mesmo em uma pasta pessoal. Agora, escreva os comandos no script que definam dois objetos: um contendo uma sequência entre 1 e 100 e outro com o texto do seu nome (ex. <code>'Ricardo'</code>). Execute o código com os atalhos no teclado.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf6807e85d" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf6807e85d" class="collapse">
<div class="card card-body">
<pre><code>x &lt;- 1:100
y &lt;- 'Ricardo'

# press control+shift+enter to run this chunk of code in RStudio</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.2-1" class="section level3 unnumbered">
<h3>Q.2<a class="anchor" aria-label="anchor" href="#q.2-1"><i class="fas fa-link"></i></a>
</h3>
<p>No <em>script</em> criado anteriormente, use função <code>message</code> para mostrar a seguinte frase no <em>prompt</em> do R: <code>"My name is ...."</code>.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf3a77c283" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf3a77c283" class="collapse">
<div class="card card-body">
<pre><code>x &lt;- 36
y &lt;- 'Ricardo'

message(paste0('My name is ', y))

# press control+shift+enter to run this chunk of code in RStudio</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.3-1" class="section level3 unnumbered">
<h3>Q.3<a class="anchor" aria-label="anchor" href="#q.3-1"><i class="fas fa-link"></i></a>
</h3>
<p>Dentro do mesmo script, mostre o diretório atual de trabalho (veja função <code>getwd</code>, tal como em <code>print(getwd())</code>). Agora, modifique o seu diretório de trabalho para o <em>Desktop</em> (<em>Área de Trabalho</em>) e mostre a seguinte mensagem na tela do <em>prompt</em>: <code>'My desktop address is ....'</code>. Dica: use e abuse da ferramenta <em>autocomplete</em> do RStudio para rapidamente encontrar a pasta do <em>desktop</em>.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf7f17c94a" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf7f17c94a" class="collapse">
<div class="card card-body">
<pre><code>current_dir &lt;- getwd()
print(current_dir)

new_dir &lt;- '~/Desktop/' # this is probably C:/Users/USERNAME/Desktop for Windows
setwd(new_dir)

cat(paste0('My desktop address is ', getwd()))</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.4-1" class="section level3 unnumbered">
<h3>Q.4<a class="anchor" aria-label="anchor" href="#q.4-1"><i class="fas fa-link"></i></a>
</h3>
<p>Utilize o R para baixar o arquivo compactado com o material do livro, disponível nesse <a href="https://www.msperlin.com/files/adfer-files/adfeR-code-and-data.zip">link</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://www.msperlin.com/files/adfer-files/adfeR-code-and-data.zip" class="uri"&gt;https://www.msperlin.com/files/adfer-files/adfeR-code-and-data.zip&lt;/a&gt;&lt;/p&gt;'><sup>14</sup></a>. Salve o mesmo como um arquivo na pasta temporária da sessão (veja função <code>tempfile</code>).</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf46d41b09" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf46d41b09" class="collapse">
<div class="card card-body">
<pre><code>local_file &lt;- tempfile(fileext = '.zip')
my_url &lt;- 'https://www.msperlin.com/files/pafdr%20files/Code_Data_pafdR.zip'

download.file(url = my_url, 
              destfile = local_file)

# check if exists
file.exists(local_file)</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.5-1" class="section level3 unnumbered">
<h3>Q.5<a class="anchor" aria-label="anchor" href="#q.5-1"><i class="fas fa-link"></i></a>
</h3>
<p>Utilize a função <code>unzip</code> para descompactar o arquivo baixado na questão anterior para um diretório chamado <code>'adfeR-Files'</code> dentro da pasta do “Desktop”. Quantos arquivos estão disponíveis na pasta resultante? Dica: use o argumento <code>recursive = TRUE</code> com <code>list.files</code> para procurar também todos subdiretórios disponíveis.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf355e94ed" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf355e94ed" class="collapse">
<div class="card card-body">
<pre><code>my_folder &lt;- '~/Desktop/adfeR-Files' # this is probably C:/Users/USERNAME/Desktop for Windows
unzip(local_file, exdir = my_folder) # local_file comes from previous exercise

files &lt;- list.files(my_folder, 
                    full.names = TRUE, 
                    recursive = TRUE)

n_files &lt;- length(files)

message(paste0('There are ', n_files, ' files available at folder "', my_folder, '".'))</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.6-1" class="section level3 unnumbered">
<h3>Q.6<a class="anchor" aria-label="anchor" href="#q.6-1"><i class="fas fa-link"></i></a>
</h3>
<p>Toda vez que o usuário instala um pacote do R, os arquivos particulares ao pacote são armazenados localmente em uma pasta específica do computador. Utilizando comando <code>Sys.getenv('R_LIBS_USER')</code> e <code>list.dirs</code>, liste todos os diretórios desta pasta. Quantos pacotes estão disponíveis nesta pasta do seu computador?</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf335109cb" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf335109cb" class="collapse">
<div class="card card-body">
<pre><code>r_pkg_folder &lt;- Sys.getenv ('R_LIBS_USER')

available_dirs &lt;- list.dirs(r_pkg_folder, recursive = FALSE)
n_dirs &lt;- length(available_dirs)

cat(paste0('There are ', n_dirs, ' folders available  at "', r_pkg_folder, '".'))</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.7-1" class="section level3 unnumbered">
<h3>Q.7<a class="anchor" aria-label="anchor" href="#q.7-1"><i class="fas fa-link"></i></a>
</h3>
<p>No mesmo assunto do exercício anterior, liste todos os arquivos em todas as subpastas do diretório contendo os arquivos dos diferentes pacotes. Em média, quantos arquivos são necessários para cada pacote?</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf649cd15b" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf649cd15b" class="collapse">
<div class="card card-body">
<pre><code>r_pkg_folder &lt;- Sys.getenv ('R_LIBS_USER')

pkg_files &lt;- list.files(r_pkg_folder, recursive = TRUE)
my_dirs &lt;- list.dirs(r_pkg_folder, recursive = FALSE)

n_files &lt;- length(pkg_files)
n_dirs &lt;- length(my_dirs)

my_msg &lt;- paste0('We have ', length(pkg_files), ' ',
                 'files for ', length(my_dirs), ' packages. \n',
                 'On average, there are ', n_files/n_dirs, ' files per directory.')

message(my_msg)</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.8-1" class="section level3 unnumbered">
<h3>Q.8<a class="anchor" aria-label="anchor" href="#q.8-1"><i class="fas fa-link"></i></a>
</h3>
<p>Use função <code>install.packages</code> para instalar o pacote <code>BatchGetSymbols</code> no seu computador. Após a instalação, use função <code><a href="https://rdrr.io/pkg/BatchGetSymbols/man/BatchGetSymbols.html">BatchGetSymbols::BatchGetSymbols</a></code> para baixar dados de preços para a ação da Petrobrás – PETR3 (PETR3.SA no Yahoo finance) – nos últimos 15 dias. Dicas: 1) use função <code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date()</a></code> para definir data atual e <code>Sys.Date() - 15</code> para calcular a data localizada 15 dias no passado; 2) note que a saída de <code>BatchGetSymbols</code> é uma lista, um tipo especial de objeto, e o que os dados de preços estão localizados no segundo elemento dessa lista.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf126898aa" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf126898aa" class="collapse">
<div class="card card-body">
<pre><code>if (!require(BatchGetSymbols)) install.packages('BatchGetSymbols')

l_out &lt;- BatchGetSymbols(tickers = 'PETR3.SA',
                         first.date = Sys.Date() - 15,
                         last.date = Sys.Date())

df_prices &lt;- l_out[[2]]
str(df_prices)</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.9-1" class="section level3 unnumbered">
<h3>Q.9<a class="anchor" aria-label="anchor" href="#q.9-1"><i class="fas fa-link"></i></a>
</h3>
<p>O pacote <code>cranlogs</code> permite o acesso a estatísticas de <em>downloads</em> de pacotes do CRAN. Após instalar o <code>cranlogs</code> no seu computador, use função <code><a href="https://r-hub.github.io/cranlogs/reference/cran_top_downloads.html">cranlogs::cran_top_downloads</a></code> para verificar quais são os 10 pacotes mais instalados pela comunidade global no último mês. Qual o pacote em primeiro lugar? Dica: Defina a entrada da função <code>cran_top_downloads</code> como sendo <code>when = 'last-month'</code>. Também note que a resposta aqui pode não ser a mesma que obteve pois esta depende do dia em que foi executado o código.</p>
<br> Resposta: <select class="webex-select"><option value="blank"></option>
<option value="">dplyr</option>
<option value="">cli</option>
<option value="answer">ggplot2</option>
<option value="">devtools</option>
<option value="">textshaping</option></select><div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf25a85ea9" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf25a85ea9" class="collapse">
A solução é ggplot2. Para chegar no resultado anterior, deves executar o código abaixo. Para isso, abra um novo script no RStudio (Control+shift+N), copie e cole o código, e rode o script inteiro apertando Control+Shift+Enter ou por linha com Control+Enter.
<div class="card card-body">
<pre><code>#if (!require(cranlogs)) install.packages('cranlogs')

pkgs &lt;- cranlogs::cran_top_downloads(when = 'last-month')

my_sol &lt;- pkgs$package[1]</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.10-1" class="section level3 unnumbered">
<h3>Q.10<a class="anchor" aria-label="anchor" href="#q.10-1"><i class="fas fa-link"></i></a>
</h3>
<p>Utilizando pacote <code>devtools</code>, instale a versão de desenvolvimento do pacote <code>ggplot2</code>, disponível no repositório de <a href="https://github.com/hadley">Hadley Hickman</a>. Carregue o pacote usando <code>library</code> e crie uma figura simples com o código <code>qplot(y = rnorm(10), x = 1:10)</code>.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf11b8727c" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf11b8727c" class="collapse">
<div class="card card-body">
<pre><code>if (!require(devtools)) install.packages("devtools")

devtools::install_github('hadley/ggplot2')

library(ggplot2)
qplot(y = rnorm (10), x = 1:10)</code></pre>
</div>
</div>
<hr>
<p><span id="webex-total_correct"></span></p>
</div>
<div id="q.11" class="section level3 unnumbered">
<h3>Q.11<a class="anchor" aria-label="anchor" href="#q.11"><i class="fas fa-link"></i></a>
</h3>
<p>Utilizando sua capacidade de programação, verifique no seu computador qual pasta, a partir do diretório de “Documentos” (atalho = <code>~</code>), possui o maior número de arquivos. Apresente na tela do R as cinco pastas com maior número de arquivos.</p>
<div style="text-align: left; margin-top: 2px; padding: 13px 0 10px 0;">
<p>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse_11cf31002ec3" aria-expanded="false" aria-controls="collapseExample">
Solução
</button>
</p>
</div>
<div id="collapse_11cf31002ec3" class="collapse">
<div class="card card-body">
<pre><code>doc_folder &lt;- '~' # 'C:/Users/USERNAME/Documents' in Windows
                  # '/home/USERNAME/  in Linux

fct_count_files &lt;- function(dir_in) {
  n_files &lt;- list.files(dir_in, recursive = FALSE)
  return(length(n_files))
}

# be aware this might take lots of time...
all_folders &lt;- fs::dir_ls(path = doc_folder, 
                          type = 'directory', 
                          recurse = TRUE)

counter_files &lt;- sapply(all_folders, fct_count_files)
sorted &lt;- sort(counter_files, decreasing = TRUE)

message('\nThe five folders with highest number of files are:\n\n')
message(paste0(names(sorted[1:5]), collapse = '\n'))</code></pre>
</div>
</div>

</div>
</div>
</div>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://padfer.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
  <div class="chapter-nav">
<div class="prev"><a href="introducao.html"><span class="header-section-number">1</span> Introdução</a></div>
<div class="next"><a href="scripts-pesquisa.html"><span class="header-section-number">3</span> Desenvolvendo Rotinas de Pesquisa</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#operacoes-basicas"><span class="header-section-number">2</span> Operações Básicas no R</a></li>
<li><a class="nav-link" href="#como-o-r-funciona"><span class="header-section-number">2.1</span> Como o R Funciona?</a></li>
<li><a class="nav-link" href="#objetos-e-fun%C3%A7%C3%B5es"><span class="header-section-number">2.2</span> Objetos e Funções</a></li>
<li><a class="nav-link" href="#o-formato-brasileiro"><span class="header-section-number">2.3</span> O Formato Brasileiro</a></li>
<li><a class="nav-link" href="#tipos-de-arquivos"><span class="header-section-number">2.4</span> Tipos de Arquivos</a></li>
<li><a class="nav-link" href="#explicando-a-tela-do-rstudio"><span class="header-section-number">2.5</span> Explicando a Tela do RStudio</a></li>
<li>
<a class="nav-link" href="#pacotes-do-r"><span class="header-section-number">2.6</span> Pacotes do R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#instalando-pacotes-do-cran"><span class="header-section-number">2.6.1</span> Instalando Pacotes do CRAN</a></li>
<li><a class="nav-link" href="#instalando-pacotes-do-github"><span class="header-section-number">2.6.2</span> Instalando Pacotes do Github</a></li>
<li><a class="nav-link" href="#carregando-pacotes"><span class="header-section-number">2.6.3</span> Carregando Pacotes</a></li>
<li><a class="nav-link" href="#atualizando-pacotes"><span class="header-section-number">2.6.4</span> Atualizando Pacotes</a></li>
</ul>
</li>
<li><a class="nav-link" href="#executando-c%C3%B3digos-em-um-script"><span class="header-section-number">2.7</span> Executando Códigos em um Script</a></li>
<li><a class="nav-link" href="#testando-c%C3%B3digo"><span class="header-section-number">2.8</span> Testando Código</a></li>
<li><a class="nav-link" href="#criando-objetos-simples"><span class="header-section-number">2.9</span> Criando Objetos Simples</a></li>
<li><a class="nav-link" href="#criando-vetores"><span class="header-section-number">2.10</span> Criando Vetores</a></li>
<li><a class="nav-link" href="#conhecendo-os-objetos-criados"><span class="header-section-number">2.11</span> Conhecendo os Objetos Criados</a></li>
<li><a class="nav-link" href="#mostrando-e-formatando-informa%C3%A7%C3%B5es-na-tela"><span class="header-section-number">2.12</span> Mostrando e Formatando Informações na Tela</a></li>
<li><a class="nav-link" href="#conhecendo-o-tamanho-dos-objetos"><span class="header-section-number">2.13</span> Conhecendo o Tamanho dos Objetos</a></li>
<li><a class="nav-link" href="#selecionando-elementos-de-um-vetor-at%C3%B4mico"><span class="header-section-number">2.14</span> Selecionando Elementos de um Vetor Atômico</a></li>
<li><a class="nav-link" href="#limpando-a-mem%C3%B3ria"><span class="header-section-number">2.15</span> Limpando a Memória</a></li>
<li><a class="nav-link" href="#mostrando-e-mudando-o-diret%C3%B3rio-de-trabalho"><span class="header-section-number">2.16</span> Mostrando e Mudando o Diretório de Trabalho</a></li>
<li><a class="nav-link" href="#coment%C3%A1rios-no-c%C3%B3digo"><span class="header-section-number">2.17</span> Comentários no Código</a></li>
<li><a class="nav-link" href="#cancelando-a-execu%C3%A7%C3%A3o-de-um-c%C3%B3digo"><span class="header-section-number">2.18</span> Cancelando a Execução de um Código</a></li>
<li><a class="nav-link" href="#procurando-ajuda"><span class="header-section-number">2.19</span> Procurando Ajuda</a></li>
<li><a class="nav-link" href="#utilizando-code-completion-com-a-tecla-tab"><span class="header-section-number">2.20</span> Utilizando Code Completion com a Tecla tab</a></li>
<li>
<a class="nav-link" href="#interagindo-com-arquivos-e-o-sistema-operacional"><span class="header-section-number">2.21</span> Interagindo com Arquivos e o Sistema Operacional</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#listando-arquivos-e-pastas"><span class="header-section-number">2.21.1</span> Listando Arquivos e Pastas</a></li>
<li><a class="nav-link" href="#apagando-arquivos-e-diret%C3%B3rios"><span class="header-section-number">2.21.2</span> Apagando Arquivos e Diretórios</a></li>
<li><a class="nav-link" href="#utilizando-arquivos-e-diret%C3%B3rios-tempor%C3%A1rios"><span class="header-section-number">2.21.3</span> Utilizando Arquivos e Diretórios Temporários</a></li>
<li><a class="nav-link" href="#baixando-arquivos-da-internet"><span class="header-section-number">2.21.4</span> Baixando Arquivos da Internet</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#exerc-operacoes-basicas"><span class="header-section-number">2.22</span> Exercícios</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#q.1-1">Q.1</a></li>
<li><a class="nav-link" href="#q.2-1">Q.2</a></li>
<li><a class="nav-link" href="#q.3-1">Q.3</a></li>
<li><a class="nav-link" href="#q.4-1">Q.4</a></li>
<li><a class="nav-link" href="#q.5-1">Q.5</a></li>
<li><a class="nav-link" href="#q.6-1">Q.6</a></li>
<li><a class="nav-link" href="#q.7-1">Q.7</a></li>
<li><a class="nav-link" href="#q.8-1">Q.8</a></li>
<li><a class="nav-link" href="#q.9-1">Q.9</a></li>
<li><a class="nav-link" href="#q.10-1">Q.10</a></li>
<li><a class="nav-link" href="#q.11">Q.11</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Análise de Dados Financeiros e Econômicos com o R - Versão Online</strong>" was written by Marcelo S. Perlin (<a href="mailto:marcelo.perlin@ufrgs.br" class="email">marcelo.perlin@ufrgs.br</a>). It was last built on 2022-11-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
